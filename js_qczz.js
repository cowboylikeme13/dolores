function 犒赏军队(){id("zzcd").style.display="block",id("zzcdgb").onclick=function(){id("zzcd").style.display="none"},id("zzcdtext").innerText="请选择要犒赏的军队。每个士兵5两赏银，可增加10点军队士气。";for(var n=0,l=0;l<20;){var i=className("jdxb")[l];i.属性=_all_army[n],null==i.属性?(i.style.display="none",className("jdxzq")[l].style.display="none",className("jdxzl")[l].style.display="none"):(i.innerText=_all_army[n].队名,i.style.display="block",className("jdxzq")[l].序号=l,className("jdxzq")[l].style.display="block",className("jdxzl")[l].style.display="block",_all_army[n].犒赏=1,className("jdxzq")[l].onclick=function(){"none"==className("jdxzl")[this.序号].style.display?(className("jdxzl")[this.序号].style.display="block",className("jdxb")[this.序号].属性.犒赏=1):"block"==className("jdxzl")[this.序号].style.display&&(className("jdxzl")[this.序号].style.display="none",className("jdxb")[this.序号].属性.犒赏=0)}),n+=1,l++}id("zzqueding").onclick=function(){var n=0;for(l=0;l<_all_army.length;)1==_all_army[l].犒赏&&(_all_army[l].训练度+=10,_all_army[l].犒赏=0,100<_all_army[l].训练度&&(_all_army[l].训练度=100),n+=5*_all_army[l].兵力),l++;国家.金钱-=n,主角.犒赏军队=1,出圣旨("为嘉奖各位军士将领，朝廷特批白银"+n+"两以犒赏军队，望众将士再接再厉。"),更新资料(),id("zzcd").style.display="none"}}function 加强训练函数(){id("hukoupucha").style.display="block",id("huhouTitle").innerText="训练军队",id("huhouText").innerText="要训练全部军队，加强士气吗？\n带兵将军武力越高训练效果越好。",id("hkan0").innerText="确定",id("hkan1").innerText="取消",id("hkan1").onclick=function(){id("hukoupucha").style.display="none"},id("hkan0").onclick=function(){if(0==国家.训练周期){for(国家.训练周期=1,id("hukoupucha").style.display="none",遵旨函数("已经命令全部军队长期训练。"),i=0;i<_all_army.length;)_all_army[i].训练度+=Math.round(_all_army[i].将军.武力/10),NaN==_all_army[i].训练度?_all_army[i].训练度=80:100<_all_army[i].训练度&&(_all_army[i].训练度=100),_all_army[i].将军.功勋+=5,i++;大殿体力扣除程序(10)}else 小提示("军队已按原计划正在训练")}}function 编队程序(){var n=Math.ceil(属性.统帅/50);id("neishi2").style.display="none",id("neishiMB").style.display="block",id("neishiBG").style.display="none",id("neishiTitle").innerText="编辑军队",id("neishiText").innerText="皇上要进行新增、变更、还是解散队伍?\n目前拥有"+_all_army.length+"/"+n+"支队伍。\n皇帝统帅越高，可拥有的军队越多。\n将领的统帅、武力、智力分别影响军队的防御力、攻击力和回避率。兵种决定基本战斗力。\n国家军队中的士兵每月工资15，未编辑的散兵每月工资10。",id("nsan0").innerText="新建队伍",id("nsan1").innerText="调整兵力",id("nsan2").innerText="解散队伍",id("nsan3").innerText="取消",id("nsan0").onclick=function(){n>_all_army.length?(人才列表显示(19),id("neishiMB").style.display="none"):小提示("目前队伍数量已达到上限")},id("nsan1").onclick=function(){变更队伍(1),id("neishiMB").style.display="none"},id("nsan2").onclick=function(){变更队伍(2),id("neishiMB").style.display="none"},id("nsan3").onclick=function(){id("neishiMB").style.display="none"}}function 新建队伍(l){id("xjdw").style.display="block",id("zhixingren2").innerText="本队将军："+l.名字,id("zxrbg2").onclick=function(){id("数值拉动面板").style.display="none",人才列表显示(19)};var n=["队","营","师","军"];id("dwming").value=主名[random(主名.length)]+主名[random(主名.length)]+n[random(n.length)];id("dwming").value;id("刀兵").onclick=function(){var n=id("dwming").value;新建队伍执行(l,n,0),id("xjdw").style.display="none"},id("枪兵").onclick=function(){var n=id("dwming").value;新建队伍执行(l,n,1),id("xjdw").style.display="none"},id("弩兵").onclick=function(){var n=id("dwming").value;新建队伍执行(l,n,2),id("xjdw").style.display="none"},id("炮兵").onclick=function(){var n=id("dwming").value;新建队伍执行(l,n,3),id("xjdw").style.display="none"},id("刀骑兵").onclick=function(){var n=id("dwming").value;新建队伍执行(l,n,4),id("xjdw").style.display="none"},id("枪骑兵").onclick=function(){var n=id("dwming").value;新建队伍执行(l,n,5),id("xjdw").style.display="none"},id("弩骑兵").onclick=function(){var n=id("dwming").value;新建队伍执行(l,n,6),id("xjdw").style.display="none"},id("炮骑兵").onclick=function(){var n=id("dwming").value;新建队伍执行(l,n,7),id("xjdw").style.display="none"}}function 新建队伍执行(n,l,i){n.任务中=3,n.官职="将军";var o=计算单兵战力(i),o={id:_all_army.length,"队名":l,"将军":n,"兵种":i,"兵力":0,"兵力上限":0,"训练度":0,"出战中":0,"单兵战力":o,"斩杀":0,"损失":0};o.兵力上限=o.将军.带兵上限,_all_army.push(o),出圣旨("即刻任命"+n.名字+"为"+l+"将军，负责该军队所有事宜。"),队伍详情界面(_all_army[_all_army.length-1])}function 队伍详情界面(l){id("数值拉动面板").style.display="block",id("zhixingren").innerText="【"+l.队名+"】将军："+l.将军.名字,id("zxrbg").style.display="none";var i=l.训练度;console.log(l.训练度),console.log(l.兵力);var o=l.训练度*l.兵力;console.log(o),0==l.兵种?国家.朴刀+=l.兵力:1==l.兵种?国家.长枪+=l.兵力:2==l.兵种?国家.弓弩+=l.兵力:3==l.兵种?国家.铁炮+=l.兵力:4==l.兵种?(国家.朴刀+=l.兵力,国家.战马+=l.兵力):5==l.兵种?(国家.长枪+=l.兵力,国家.战马+=l.兵力):6==l.兵种?(国家.弓弩+=l.兵力,国家.战马+=l.兵力):7==l.兵种&&(国家.铁炮+=l.兵力,国家.战马+=l.兵力),国家.士兵+=l.兵力,l.兵力=0;var n=计算兵力上限是多少(l);id("range").max=n,id("rangeText").innerText="兵种："+计算是哪种兵种(l.兵种)+"。兵器或散兵不足时，队伍将无法达到满员。",id("rangeText").innerText+="需要配置多少兵力。",console.log(n),id("range").value=0,change(),id("rangeText").innerText+="\n国家散兵："+国家.士兵+"，朴刀库存："+国家.朴刀+"，\n长枪库存："+国家.长枪+"，弓弩库存："+国家.弓弩+"，\n铁炮库存："+国家.铁炮+"，军马库存:"+国家.战马+"。",id("rqueding").onclick=function(){var n;null==id("range").value?小提示("请拉动红条操作"):(n=l.兵力-Number(id("range").value),大殿体力扣除程序(10),l.兵力=Number(id("range").value),0==l.兵力?l.训练度=0:l.训练度=Math.round(o/l.兵力),console.log("兵力"+l.兵力),console.log("训练度"+l.训练度),l.训练度>i&&(l.训练度=i),0==l.兵种?国家.朴刀+=n:1==l.兵种?国家.长枪+=n:2==l.兵种?国家.弓弩+=n:3==l.兵种?国家.铁炮+=n:4==l.兵种?(国家.朴刀+=n,国家.战马+=n):5==l.兵种?(国家.长枪+=n,国家.战马+=n):6==l.兵种?(国家.弓弩+=n,国家.战马+=n):7==l.兵种&&(国家.铁炮+=n,国家.战马+=n),国家.士兵+=n,更新资料(),遵旨函数("已调整【"+l.队名+"】兵力为"+l.兵力+"。"),id("数值拉动面板").style.display="none",id("xjdw").style.display="none",id("zxrbg").style.display="block",变更队伍(1))}}function 变更队伍(n){id("junshibiao").style.display="block",id("jssm").style.display="none",id("jssmline").style.display="none",id("js3").style.display="none",id("js1").innerText="队名",id("js2").innerText="将军",id("js4").innerText="兵力",id("js5").innerText="统帅",id("js6").innerText="武力",id("js7").innerText="品阶",id("js8").innerText="兵种",id("js9").innerText="士气",id("jsTittle").innerText="军队列表";for(var l=[],i=0;i<_all_army.length;)0==_all_army[i].出战中&&l.push(_all_army[i]),i+=1;序列=0,更新队伍信息(n,l,序列),id("junshiqian").onclick=function(){0<序列&&(--序列,更新队伍信息(n,l,序列))},id("junshihou").onclick=function(){序列<Math.round(l.length/7)&&(序列+=1,更新队伍信息(n,l,序列))}}function 更新队伍信息(l,n,i){for(var o=0;o<10;){var a=n[10*i+o],e=className("junshilbx")[o];null==a?e.style.display="none":(e.style.display="block",className("j1")[o].style.color="#ffffff",className("j1")[o].innerText=a.队名,className("j2")[o].innerText=a.将军.名字,className("j3")[o].innerText="",className("j4")[o].innerText=a.兵力+"/"+a.将军.带兵上限,className("j5")[o].innerText=a.将军.统帅,className("j6")[o].innerText=a.将军.武力,className("j7")[o].innerText=a.将军.品阶,className("j8")[o].innerText=计算是哪种兵种(a.兵种),className("j9")[o].innerText=a.训练度,e.取=a,e.onclick=function(){if(1==l)队伍详情界面(this.取);else if(2==l){for(n=0;n<_all_rencai.length;)_all_rencai[n].名字==this.取.将军.名字&&(_all_rencai[n].任务中=0),n++;国家.士兵+=this.取.兵力,0==this.取.兵种?国家.朴刀+=this.取.兵力:1==this.取.兵种?国家.长枪+=this.取.兵力:2==this.取.兵种?国家.弓弩+=this.取.兵力:3==this.取.兵种?国家.铁炮+=this.取.兵力:4==this.取.兵种?(国家.朴刀+=this.取.兵力,国家.战马+=this.取.兵力):5==this.取.兵种?(国家.长枪+=this.取.兵力,国家.战马+=this.取.兵力):6==this.取.兵种?(国家.弓弩+=this.取.兵力,国家.战马+=this.取.兵力):7==this.取.兵种&&(国家.铁炮+=this.取.兵力,国家.战马+=this.取.兵力);for(var n=0;n<_all_army.length;)_all_army[n].将军.名字==this.取.将军.名字&&_all_army[n].队名==this.取.队名&&(_all_army[n].将军.官职=void 0,_all_army[n].将军.任务中=0,_all_army.splice(n,1)),n++;this.parentNode.style.display="none",变更队伍(2)}}),o++}}function 计算单兵战力(n){var l=0;return 0==n?l=1+所有技术[12].开启*所有技术[12].效果:1==n?l=1.3+所有技术[17].开启*所有技术[17].效果:2==n?l=1.5+所有技术[16].开启*所有技术[16].效果:3==n?l=1.8+所有技术[15].开启*所有技术[15].效果:4==n?l=2+所有技术[12].开启*所有技术[12].效果+所有技术[14].开启*所有技术[14].效果:5==n?l=2.3+所有技术[17].开启*所有技术[17].效果+所有技术[14].开启*所有技术[14].效果:6==n?l=2.5+所有技术[16].开启*所有技术[16].效果+所有技术[14].开启*所有技术[14].效果:7==n&&(l=2.8+所有技术[15].开启*所有技术[15].效果+所有技术[14].开启*所有技术[14].效果),l}function 计算是哪种兵种(n){var l="啥啥啥";return 0==n?l="刀兵":1==n?l="枪兵":2==n?l="弩兵":3==n?l="炮兵":4==n?l="刀骑兵":5==n?l="枪骑兵":6==n?l="弩骑兵":7==n&&(l="炮骑兵"),l}function 计算兵力上限是多少(n){var l=n.将军.带兵上限,i=国家.士兵,o=国家.朴刀,a=国家.长枪,e=国家.弓弩,_=国家.铁炮,t=国家.战马,d=[];return 0==n.兵种?(d.push(i),d.push(l),d.push(o),d.sort(function(n,l){return n-l})):1==n.兵种?(d.push(i),d.push(l),d.push(a),d.sort(function(n,l){return n-l})):2==n.兵种?(d.push(i),d.push(l),d.push(e),d.sort(function(n,l){return n-l})):3==n.兵种?(d.push(i),d.push(l),d.push(_),d.sort(function(n,l){return n-l})):4==n.兵种?(d.push(i),d.push(l),d.push(o),d.push(t),d.sort(function(n,l){return n-l})):5==n.兵种?(d.push(i),d.push(l),d.push(a),d.push(t),d.sort(function(n,l){return n-l})):6==n.兵种?(d.push(i),d.push(l),d.push(e),d.push(t),d.sort(function(n,l){return n-l})):7==n.兵种&&(d.push(i),d.push(l),d.push(_),d.push(t),d.sort(function(n,l){return n-l})),d[0]}function 战争程序(){if(1==主角.出战)小提示("军队正在备战");else{id("sy").style.display="block",id("syb").style.display="none",id("syb2").style.display="block",id("syTitle").innerText="发动战争",id("sysm").innerText="启禀皇上，我们要对哪个州府发动战争？",id("qxsy").onclick=function(){id("syb").style.display="block",id("syb2").style.display="none",id("sy").style.display="none"};for(var n=[],l=0;l<_all_city.length;)(8==_all_city[l].归属||23==_all_city[l].归属||3<=_all_nation[_all_city[l].归属].外交)&&n.push(_all_city[l]),l+=1;for(var i=[],l=0;l<n.length;){for(var o=0;o<n[l].邻居.length;){var a=n[l].邻居[o];加入邻居程序(i,_all_city[a]),o+=1}l+=1}for(l=0;l<32;)void 0!==i[l]?(className("sydb2")[l].innerText=i[l].名称,className("sydb2")[l].style.display="block",className("sydb2")[l].属性=i[l],className("sydb2")[l].onclick=function(){2==_all_nation[this.属性.归属].外交?小提示("这是同盟国的领地，不可进攻"):3==_all_nation[this.属性.归属].外交?小提示("这是属国的领地，不可进攻"):(皇室出征选择(this.属性),id("syb").style.display="block",id("syb2").style.display="none",id("sy").style.display="none")}):className("sydb2")[l].style.display="none",l+=1}}function 皇室出征选择(i){console.log(i.名称+i.士兵);var n=0;id("neishi2").style.display="none",id("neishiMB").style.display="block",id("neishiBG").style.display="none",id("neishiTitle").innerText="发动战争",id("neishiText").innerText="皇上是否要御驾亲征或派哪位皇室成员出征？",id("nsan0").innerText="御驾亲征",id("nsan1").innerText="皇子出征",id("nsan2").innerText="王爷出征",id("nsan3").innerText="暂不安排",id("nsan0").onclick=function(){小提示("-_-。sorry！这个功能还没有实现")},id("nsan1").onclick=function(){for(var n=[],l=0;l<_all_child.length;)0==_all_child[l].状态&&0==_all_child[l].性别&&16<=_all_child[l].年龄&&0==_all_child[l].病&&n.push(_all_child[l]),l+=1;0==n.length?小提示("没有可以出征的成年皇子"):(子女一览程序(9,i),id("neishiMB").style.display="none")},id("nsan2").onclick=function(){年<6?小提示("小王爷尚且年幼，无法出征"):3==主角.小王爷||10==主角.小王爷||9==主角.小王爷?小提示("小王爷已经不在这里了"):(n+=.15+5e-4*主角._relation_chenwangyan,id("neishiMB").style.display="none",战争出动(i,n,0,void 0,void 0))},id("nsan3").onclick=function(){console.log("皇室加成"+n),null==n&&(n=0),战争出动(i,n,0,void 0,void 0),id("neishiMB").style.display="none"}}function 派皇子攻打(n,l){console.log("武力"+l.武力),皇室加成=.04*Math.round(l.统帅)+.03*l.关系,国家.目前出征的皇子=l,战争出动(n,皇室加成,0,void 0,void 0)}function 战争出动(a,e,_,t,d){id("zzcd").style.display="block",id("zzcdtext").innerText="请选择出征的军队",id("zzcdgb").onclick=function(){for(id("zzcd").style.display="none",c=0;c<_all_army.length;)_all_army[c].出战中=0,c++},console.log("皇室加成："+e),1==_?(id("zzcdtext").innerText="急报!"+_all_nation[d.归属].名称+"的"+Math.round(d.士兵/1e4)+"万大军正在靠近我国的"+t.名称+"，请求支援。",id("zzcdgb").style.display="none"):0==_&&(id("zzcdgb").style.display="block",id("zzcdtext").innerText="请选择出征的军队。");for(var n=0,c=0;c<20;){var l=className("jdxb")[c];l.属性=_all_army[n],null==l.属性?(l.style.display="none",className("jdxzl")[c].style.display="none",className("jdxzq")[c].style.display="none"):(l.innerText=_all_army[n].队名,l.style.display="block",className("jdxzq")[c].序号=c,className("jdxzq")[c].style.display="block",className("jdxzl")[c].style.display="block",l.属性.出战中=1,className("jdxzq")[c].onclick=function(){"none"==className("jdxzl")[this.序号].style.display?(className("jdxzl")[this.序号].style.display="block",className("jdxb")[this.序号].属性.出战中=1):"block"==className("jdxzl")[this.序号].style.display&&(className("jdxzl")[this.序号].style.display="none",className("jdxb")[this.序号].属性.出战中=0)}),n+=1,c++}id("zzqueding").onclick=function(){var n,l=0,i=0,o=[];for(c=0;c<_all_army.length;)1==_all_army[c].出战中&&(o.push(_all_army[c]),l+=10*_all_army[c].兵力,i+=40*_all_army[c].兵力),c++;console.log("皇室："+e),1==_?(n=1==国家.嘉宁出征?(嘉宁出征(),10):0,新版计算战斗结果(a,n,_,t,d,o),id("zzcdb").style.display="none",id("zzcd").style.display="none"):0==_&&(0==o.length?小提示("请选择出征队伍"):(主角.出战=1,n=null==e?0:e,console.log("皇室加成"+n),记录战争要素(a,n,_,t,d,o),遵旨函数("即刻整备军队，进行"+a.名称+"之战。"),出圣旨("即刻整备军队，进行"+a.名称+"之战。"),_all_nation[a.归属].外交=0,_all_nation[a.归属].友好度=0,_all_nation[a.归属].贸易年数=0,_all_nation[a.归属].贸易额=0,id("zzcd").style.display="none")),console.log("军队数量"+o.length),国家.金钱-=l,国家.粮食-=i,更新资料()}}function 记录战争要素(n,l,i,o,a,e){国家.临时的战争要素=[n,l,i,o,a,e]}function 新版计算战斗结果(l,o,a,e,_,t){战争结局={},console.log("皇室加成"+o);var d=所有技术[13].开启*所有技术[13].效果;if(0==a){var c=0;for(n=0;n<t.length;)c+=Number(t[n].兵力),t[n].斩杀=0,t[n].损失=0,t[n].原兵力=t[n].兵力,n++;_all_nation[l.归属].战力,l.士兵;for(console.log(l.士兵),战争结局.我方军队有几支=t.length,战争结局.我方总士兵=Number(c),战争结局.敌人总士兵=l.士兵,战争结局.目标=l,战争结局.对方兵种=_all_nation[l.归属].兵种,战争结局.战报="我方在"+l.名称+"与地方的战报如下：",战争结局.战报+="\n我方共派出"+战争结局.我方军队有几支+"支军队，我方总兵力："+战争结局.我方总士兵+"，敌方总兵力："+战争结局.敌人总士兵+"，兵种："+战争结局.对方兵种+"。",战争结局.出征的军队=t,i=0;i<100;){var s=l.士兵;for(console.log(i+"回合目标.士兵剩余"+l.士兵),n=0;n<t.length;){console.log(t[n].队名+"单兵战力"+t[n].单兵战力+"兵力"+t[n].兵力+"出征的军队[n].训练度"+t[n].训练度+"将军武力"+t[n].将军.武力+"皇室加成"+o);var r,y,u=l.士兵;0<l.士兵&&(r=null==o?0:o,y=Math.round(t[n].单兵战力*t[n].兵力*(t[n].训练度/100*t[n].将军.武力/100+r)/100),l.士兵-=y,l.士兵<0?(l.士兵=0,战争结局.出征的军队[n].斩杀+=u):战争结局.出征的军队[n].斩杀+=y,console.log(战争结局.出征的军队[n].队名+"斩杀"+战争结局.出征的军队[n].斩杀)),n++}var f,h,p=Math.round(_all_nation[l.归属].战力*s/100),x=0;for(n=0;n<t.length;)0<t[n].兵力&&(x+=1),n++;for(n=0;n<t.length;)0<t[n].兵力&&(f=102-Math.round(t[n].将军.智力*t[n].将军.智力/100),0==random(f)?console.log(战争结局.出征的军队[n].队名+"回避成功"):(h=Math.round(p/x*(2-t[n].将军.统帅/100-d)),console.log(战争结局.出征的军队[n].队名+"本次损失"+h),t[n].兵力-=h,t[n].兵力<0?(t[n].兵力=0,战争结局.出征的军队[n].损失=t[n].原兵力):战争结局.出征的军队[n].损失+=h)),console.log(战争结局.出征的军队[n].队名+"损失"+战争结局.出征的军队[n].损失),n++;i++}for(n=0;n<t.length;)战争结局.战报+="\n【"+战争结局.出征的军队[n].队名+"】主将："+战争结局.出征的军队[n].将军.名字+"（统帅"+战争结局.出征的军队[n].将军.统帅+"/武力"+战争结局.出征的军队[n].将军.武力+"/智力"+战争结局.出征的军队[n].将军.智力+"），士气:"+战争结局.出征的军队[n].训练度,战争结局.战报+="\n杀敌"+战争结局.出征的军队[n].斩杀+"人，损失"+战争结局.出征的军队[n].损失+"人。",n++;if(l.士兵<=0)主角.战斗队伍.胜负=1,战争结局.胜负=1,战争结局.战报+="战争结束，我方胜利。";else{var m=0;for(n=0;n<t.length;)m+=t[n].兵力,n++;m<=0?(主角.战斗队伍.胜负=0,战争结局.胜负=0,战争结局.战报+="战争结束，我方战败。"):(主角.战斗队伍.胜负=2,战争结局.胜负=2,战争结局.战报+="\n\n战争结束，双方平手。")}console.log(战争结局.战报)}else if(1==a){if(c=0,_all_nation[_.归属].战力,_.士兵,console.log(_.士兵),0!=t.length)for(n=0;n<t.length;)c+=t[n].兵力,t[n].斩杀=0,t[n].损失=0,t[n].原兵力=t[n].兵力,n++;if(战争结局.我方军队有几支=t.length,战争结局.我方总士兵=Number(c),战争结局.敌人总士兵=_.士兵,战争结局.目标=e,战争结局.袭击方=_,战争结局.对方兵种=_all_nation[_.归属].兵种,战争结局.战报="我方在与"+_all_nation[_.归属].名称+"的防守战战报如下：",战争结局.战报+="\n我方共派出"+战争结局.我方军队有几支+"支军队，我方总兵力："+战争结局.我方总士兵+"，敌方总兵力："+战争结局.敌人总士兵+"，兵种："+战争结局.对方兵种+"。",0==(战争结局.出征的军队=t).length)战争结局.战报+="我军无人抵抗，敌军兵不血刃，将【"+e.名称+"】占领。",e.归属=_.归属;else{for(i=0;i<100;){for(s=_.士兵,console.log(i+"回合目标.士兵剩余"+_.士兵),n=0;n<t.length;)console.log(t[n].队名+"单兵战力"+t[n].单兵战力+"兵力"+t[n].兵力+"出征的军队[n].训练度"+t[n].训练度+"将军武力"+t[n].将军.武力+"皇室加成"+o),u=_.士兵,0<_.士兵&&(y=Math.round(t[n].单兵战力*t[n].兵力*(t[n].训练度/100*t[n].将军.武力/100+o)/100),_.士兵-=y,_.士兵<0?(_.士兵=0,战争结局.出征的军队[n].斩杀+=u):战争结局.出征的军队[n].斩杀+=y,console.log(战争结局.出征的军队[n].队名+"斩杀"+战争结局.出征的军队[n].斩杀)),n++;for(p=Math.round(_all_nation[_.归属].战力*s/100),n=x=0;n<t.length;)0<t[n].兵力&&(x+=1),n++;for(n=0;n<t.length;)0<t[n].兵力&&(f=102-Math.round(t[n].将军.智力*t[n].将军.智力/100),0==random(f)?console.log(战争结局.出征的军队[n].队名+"回避成功"):(h=Math.round(p/x*(2-t[n].将军.统帅/100-d)),console.log(战争结局.出征的军队[n].队名+"本次损失"+h),t[n].兵力-=h,t[n].兵力<0?(t[n].兵力=0,战争结局.出征的军队[n].损失=t[n].原兵力):战争结局.出征的军队[n].损失+=h)),console.log(战争结局.出征的军队[n].队名+"损失"+战争结局.出征的军队[n].损失),n++;i++}for(n=0;n<t.length;)战争结局.战报+="\n【"+战争结局.出征的军队[n].队名+"】主将："+战争结局.出征的军队[n].将军.名字+"（统帅"+战争结局.出征的军队[n].将军.统帅+"/武力"+战争结局.出征的军队[n].将军.武力+"/智力"+战争结局.出征的军队[n].将军.智力+"），士气:"+战争结局.出征的军队[n].训练度,战争结局.战报+="\n杀敌"+战争结局.出征的军队[n].斩杀+"人，损失"+战争结局.出征的军队[n].损失+"人。",n++}if(_.士兵<=0)主角.战斗队伍.胜负=1,战争结局.胜负=1,战争结局.战报+="\n\n战争结束，我方胜利，敌军被击退。";else{for(n=m=0;n<t.length;)m+=t[n].兵力,n++;m<=0?(主角.战斗队伍.胜负=0,战争结局.胜负=0,战争结局.战报+="\n\n战争结束，我方战败，【"+e.名称+"】失守。",e.归属=_.归属):(主角.战斗队伍.胜负=2,战争结局.胜负=2,战争结局.战报+="\n\n战争结束，双方平手。")}防守战发战报(),console.log(战争结局.战报)}}function 防守战发战报(){var n=战争例行消耗(战争结局);if(缓动黑幕(),id("szb").style.display="block",id("szbTittle").innerText="战报",id("szbText").innerText=战争结局.战报,id("szbText").innerText+="\n\n本次战争我军伤亡将士"+n.死伤多少人+"名，国库需支出抚恤金"+n.需要多少抚恤金+"两。",id("szbgb").onclick=function(){this.parentNode.style.display="none"},0==战争结局.胜负)记录大事件的程序(颜色代码(战争结局.目标.名称+"失守，被"+_all_nation[战争结局.袭击方.归属].名称+"占领。","ff0000")),刷新每个国家几城的程序(),属性.快乐-=20,属性.威望-=20;else if(1==战争结局.胜负){记录大事件的程序(颜色代码(战争结局.目标.名称+"防守战战胜，"+_all_nation[战争结局.袭击方.归属].名称+"的军队被击退。","ff0000")),属性.快乐+=20,属性.威望+=50,战争结局.出征的军队.sort(compare("斩杀")),console.log(战争结局.出征的军队[0].将军.名字);for(var l=0;l<战争结局.出征的军队.length;)战争结局.出征的军队[l].将军.功勋+=100+50*l+random(10),l++}else 2==战争结局.胜负&&记录大事件的程序(颜色代码(战争结局.目标.名称+"之战异常激烈，将士也是拼命杀敌。\n战争难解难分，暂时陷入停战状态。","ff0000"));更新资料()}function 处理战争面板条的程序(n,l,i){var o=出征拉动条[l];o._parent["图"+i].gotoAndStop(i),o.长度=国家[l],o.值=0,o.数值.text=o.值,o.条._xscale=0,战争NewDrag(o.r.a)}function 战争NewDrag(n){n._x=0,n._y=0,n.onclick=function(){startDrag(this,0,0,0,397,0),this._parent.onEnterFrame=function(){this._parent.条._xscale=this.a._x/397*100,this._parent.值=Math.round(this._parent.长度*(this.a._x/397)),this._parent.数值.text=this._parent.值}},n.onclick=function(){stopDrag(),delete this.onEnterFrame},n.onclickOutside=function(){stopDrag()}}function 加入邻居程序(n,l){for(var i=0,o=0;o<n.length;)n[o].id==l.id&&(i=1),o+=1;0==i&&8!==l.归属&&23!==l.归属&&7!==_all_nation[l.归属].外交&&n.push(l)}function 战争例行消耗(n,l){var o,a,e=0;for(i=0;i<n.出征的军队.length;)e+=n.出征的军队[i].兵力,i++;for(o=n.我方总士兵-Number(e),a=1==l?3*o:6*o,i=0;i<_all_army.length;)_all_army[i].出战中=0,i++;国家.金钱-=a,console.log("战争例行消耗"+a),更新资料();l={};return l.死伤多少人=o,l.需要多少抚恤金=a,l}function 战争战报事件(){console.log(战争结局.战报),主角.战报=战争结局.战报;var l=战争例行消耗(战争结局);缓动黑幕(),id("taijianBg").style.top="0px",id("taijianBg").style.display="block",id("taijiantu").style.display="none",id("taijian2").style.backgroundPositionX="-224px",id("taijian2").style.width="159px",id("taijianbgText").innerText="皇上，"+战争结局.目标.名称+"之战的战报已经送到。\n(详细战报可参见军事奏折)",id("tjBgCon").onclick=function(){if(id("szb").style.display="block",id("szbTittle").innerText="战报",id("szbText").innerText=战争结局.战报,每月的军事奏折=战争结局.战报,id("szbgb").onclick=function(){this.parentNode.style.display="none"},0==战争结局.胜负){id("taijianbgText").innerText="战争异常激烈，我军全军覆没。",记录大事件的程序(颜色代码(战争结局.目标.名称+"之战异常激烈，我军全军覆没。","ff0000")),id("taijian2").style.backgroundPositionX="-687px",id("taijian2").style.width="214px";var n=random(100);void 0!==国家.目前出征的皇子&&(国家.目前出征的皇子.统帅<n?(id("taijianbgText").innerText+="出征的皇子"+国家.目前出征的皇子.名称+"不幸战死。",判定这个子女死亡(国家.目前出征的皇子)):(id("taijianbgText").innerText+="出征的皇子"+国家.目前出征的皇子.名称+"不幸负伤，现已回京调养，请皇上有空去看看。",国家.目前出征的皇子.病=8)),国家.目前出征的皇子=void 0}else if(1==战争结局.胜负){for(id("taijianbgText").innerText="全军将士英勇杀敌，我军获胜。出征的将领都获得了功勋。",记录大事件的程序(颜色代码(战争结局.目标.名称+"之战全军将士英勇杀敌，我军获胜。","ff0000")),id("taijian2").style.backgroundPositionX="-901px",id("taijian2").style.width="183px",void 0!==国家.目前出征的皇子&&(id("taijianbgText").innerText+="出征的皇子"+国家.目前出征的皇子.名称+",可算是立了大功。",国家.目前出征的皇子.武力+=2,100<国家.目前出征的皇子.武力&&(国家.目前出征的皇子.武力=100),国家.目前出征的皇子.统帅+=2,100<国家.目前出征的皇子.统帅&&(国家.目前出征的皇子.统帅=100)),国家.目前出征的皇子=void 0,战争结局.目标.归属=8,战争结局.出征的军队.sort(compare("斩杀")),console.log(战争结局.出征的军队[0].将军.名字),i=0;i<战争结局.出征的军队.length;)战争结局.出征的军队[i].将军.功勋+=100+50*i+random(10),i++;刷新每个国家几城的程序()}else 2==战争结局.胜负&&(id("taijianbgText").innerText="战争异常激烈，将士也是拼命杀敌。\n战争难解难分，暂时陷入停战状态。",记录大事件的程序(颜色代码(战争结局.目标.名称+"之战异常激烈，将士也是拼命杀敌。\n战争难解难分，暂时陷入停战状态。","ff0000")),id("taijian2").style.backgroundPositionX="0px",id("taijian2").style.width="112px",void 0!==国家.目前出征的皇子&&random(Math.round(国家.目前出征的皇子.统帅))<=60&&(id("taijianbgText").innerText+="出征的皇子"+国家.目前出征的皇子.名称+"不幸负伤，现已回京调养，请皇上有空去看看。",国家.目前出征的皇子.病=8),国家.目前出征的皇子=void 0);id("tjBgCon").onclick=function(){加载进步动画条的说("金钱"),0==战争结局.胜负?(属性.快乐-=20,属性.威望-=2,记录大事件的程序(颜色代码(战争结局.目标.名称+"之战失败。","5f5ffc"))):1==战争结局.胜负?(加载进步动画条的说("快乐"),加载进步动画条的说("威望"),属性.快乐+=20,属性.威望+=50,记录大事件的程序(颜色代码(战争结局.目标.名称+"之战胜利。","5f5ffc"))):2==战争结局.胜负&&记录大事件的程序(颜色代码(战争结局.目标.名称+"之战不分胜负。","5f5ffc")),更新资料(),id("taijianbgText").innerText="本次战争我军伤亡将士"+l.死伤多少人+"名，国库需支出抚恤金"+l.需要多少抚恤金+"两。",id("taijian2").style.backgroundPositionX="-224px",id("taijian2").style.width="159px",id("tjBgCon").onclick=function(){var n,l;1==战争结局.胜负?(id("tjBgCon").onclick=function(){},id("taijianbgText").innerText="",缓动黑幕(),id("fulu").style.display="block",n=Math.round(.01*Number(战争结局.敌人总士兵)),id("fuluText").innerText="本次战役共俘获"+战争结局.目标.名称+"兵"+n+"名。",l=60*战争结局.目标.人口,id("fuluText").innerText+="获得敌方城市府库银两"+l+"两。",国家.金钱+=l,1==random(3)&&(l=来一个宝贝(),id("fuluText").innerText+="\n并获得一件珍宝“"+l+"”。"),id("fuluText").innerText+="战斗中抓获的俘虏，皇上想如何处置。",id("fuluan").style.display="block",id("fuluan1").style.display="block",id("fuluan2").style.display="block",id("fuluan3").style.display="block",id("fuluan1").innerText="遣返家园",id("fuluan2").innerText="午门斩首",id("fuluan3").innerText="教化为民",id("fulutu").src="images/1975.png",id("fulukuang").onclick=function(){},id("fuluan1").onclick=function(){属性.道德+=15,战争结局.目标.人口+=n,id("fuluan1").style.display="none",id("fuluan2").style.display="none",id("fuluan3").innerText="关闭",id("fulutu").src="images/1980.png",id("fuluText").innerText="立即将俘虏送回"+战争结局.目标.名称+"。",id("fuluan3").onclick=function(){俘虏消失程序(战争结局.目标)}},id("fuluan3").onclick=function(){id("fuluan1").style.display="none",id("fuluan2").style.display="none",id("fuluan3").innerText="关闭",id("fulutu").src="images/1978.png",id("fuluText").innerText="即刻令知府前来领这些"+战争结局.目标.名称+"俘虏。",id("fuluan3").onclick=function(){俘虏消失程序(战争结局.目标)}},id("fuluan2").onclick=function(){属性.暴戾+=15,id("fuluan1").style.display="none",id("fuluan2").style.display="none",id("fuluan3").innerText="关闭",id("fuluan3").src="images/1982.png",id("fuluText").innerText="这么多俘虏兵，估计要杀上好几天。",id("fuluan3").onclick=function(){俘虏消失程序(战争结局.目标)}}):结束固定事件程序()}}}}function 俘虏消失程序(n){属性.快乐+=40,更新资料(),结束固定事件程序(),判定城里是否有敌将(n),黑色幕布(),id("fulu").style.display="none"}function 判定城里是否有敌将(n){if(0==n.敌将开关){for(var l=n.文化,i=[],o=0;o<所有敌将.length;)所有敌将[o].文化==l&&所有敌将[o]._code<5e3&&void 0!==所有敌将[o].地位&&i.push(o),o+=1;_loc8_=_all_nation[l].城.length,i.length>_loc8_?(_loc7_=i[_loc8_],1==所有敌将[i[_loc8_]].地位&&(_all_nation[l].皇帝.太子="无"),出现敌将(_loc7_,n)):判定城里是否有美女(n)}else 判定城里是否有美女(n)}function 出现敌将(l,i){i.敌将开关=1;var o=所有敌将[l];id("介绍图").style.display="block";var n=o.跳;新后宫图形读取程序(id("介绍图头像"),n,"敌将"),id("介绍图名字").innerText=o.名称,id("介绍图介绍").innerText="    "+o.介绍,id("介绍图an0").style.display="block",id("介绍图an0").innerText="斩首",id("介绍图an1").style.display="block",id("介绍图an1").innerText="关押",id("介绍图an2").style.display="block",id("介绍图an2").innerText="释放",id("介绍图an3").style.display="block",id("介绍图an3").innerText="招降",id("介绍图an0").onclick=function(){出圣旨("即刻将"+o.名称+"推出午门斩首，扬我天朝国威。"),属性.暴戾+=15,所有敌将[l].用过=1,所有敌将[l].地位=void 0,判定城里是否有美女(i);for(var n=0;n<_all_family.length;)_all_family[n].名称==o.名称&&_all_family[n]._code==o._code&&_all_family.splice(n,1),n+=1;id("介绍图").style.display="none",更新资料()},id("介绍图an1").onclick=function(){出圣旨("即刻将"+o.名称+"关押至粘干处，听候发落。"),o.被关押=1,所有敌将[l].用过=1,所有敌将[l].地位=void 0;for(var n=0;n<_all_family.length;)_all_family[n].名称==o.名称&&_all_family[n]._code==o._code&&(_all_family[n].婚配序号=void 0,_all_family[n].脉系=void 0),n+=1;判定城里是否有美女(i)},id("介绍图an2").onclick=function(){出圣旨("虽曾是敌国将领，但已无实力与天朝对抗。为显天朝宽容之道，特赦"+o.名称+"恢复自由。"),属性.道德+=10,所有敌将[l].用过=1,判定城里是否有美女(i),id("介绍图").style.display="none";for(var n=0;n<_all_family.length;)_all_family[n].名称==o.名称&&_all_family[n]._code==o._code&&_all_family.splice(n,1),n+=1;更新资料()},id("介绍图an3").onclick=function(){所有敌将[l].用过=1,所有敌将[l].地位=void 0,小提示("敌将宁死不屈")}}function 判定城里是否有美女(n){if(0==n.妃子开关){var l=n.文化,i=[],o=0,a=[];for(2==l&&i.push(2),6==l&&i.push(10),10==l&&i.push(18),19==l&&i.push(30);o<外域美人.length;)外域美人[o].文化==l&&外域美人[o]._code<=6e3&&(2!==o&&10!==o&&18!==o&&void 0!==外域美人[o].地位&&1!==外域美人[o].地位&&2!==外域美人[o].地位&&i.push(o),null==外域美人[o].地位&&null==外域美人[o].用过&&a.push(o)),o+=1;_loc8_=_all_nation[l].城.length,i.length>_loc8_?(_loc7_=i[_loc8_],1==外域美人[i[_loc8_]].地位&&(_all_nation[l].皇帝.太子="无"),出现外域美人(_loc7_,n)):0<a.length&&(_loc7_=a[random(a.length)],出现外域美人(_loc7_,n))}var e=n.文化;if(0==_all_nation[e].城.length&&void 0!==_all_nation[e].皇帝){for(l=0;l<所有敌将.length;)所有敌将[l].文化==_all_nation[e].id&&void 0!==所有敌将[l].地位&&(所有敌将[l].用过=void 0),l+=1;for(l=0;l<外域美人.length;)外域美人[l].文化==_all_nation[e].id&&void 0!==外域美人[l].地位&&(外域美人[l].用过=void 0),l+=1;for(l=0;l<_all_family.length;)_all_family[l].婚配序号!=_all_nation[e].皇帝._code&&_all_family[l].脉系!=_all_nation[e].皇帝._code||_all_family.splice(l,1),l+=1}}function 出现外域美人(n,l){l.妃子开关=1;for(var i=外域美人[n],o=0;o<_all_family.length;)_all_family[o].名称==i.名称&&_all_family[o]._code==i._code&&(i.年龄=_all_family[o].年龄,console.log(_all_family[o]),_all_family.splice(o,1)),o+=1;id("介绍图").style.display="block";l=i.跳;新后宫图形读取程序(id("介绍图头像"),l,"外域"),id("介绍图名字").innerText=i.名称,id("介绍图介绍").innerText="外貌："+i.魅力,id("介绍图介绍").innerText+="\n\n",id("介绍图介绍").innerText+="    "+i.介绍,id("介绍图an0").style.display="block",id("介绍图an0").innerText="充为宫婢",id("介绍图an1").style.display="block",id("介绍图an1").innerText="遣返家乡",id("介绍图an2").style.display="block",id("介绍图an2").innerText="直接处死",id("介绍图an3").style.display="block",id("介绍图an3").innerText="入储秀阁",id("介绍图an0").onclick=function(){外域美人[n].用过=1,外域美人[n].地位=void 0,出圣旨(i.名称+"敌国之妃。择日将"+i.名称+"送入掖庭悉心调教，充为宫廷女婢，侍奉皇家内宫。"),属性.暴戾+=5,_all_gongnv.push({id:_all_gongnv.length,"俸禄":100,"名称":i.名称,"主子":void 0,"职务":1,"能力":4}),更新资料(),id("介绍图").style.display="none"},id("介绍图an1").onclick=function(){外域美人[n].用过=1,出圣旨("虽是敌国之妃，但总是战争无辜之人。命御林军选一头领，送"+i.名称+"返回故乡。"),属性.道德+=10,更新资料(),id("介绍图").style.display="none"},id("介绍图an2").onclick=function(){外域美人[n].用过=1,外域美人[n].地位=void 0,出圣旨(i.名称+"敌国之妃。即刻将"+i.名称+"送至午门斩首，扬我天朝国威。"),属性.暴戾+=10,更新资料(),id("介绍图").style.display="none"},id("介绍图an3").onclick=function(){外域美人后宫册封(i),外域美人[n].用过=1,外域美人[n].地位=void 0,更新资料(),id("介绍图").style.display="none"}}function 外域美人后宫册封(n){n.出身=_all_nation[n.文化].名称+"战俘",n.经验=random(100),n.爱=15+random(10),n.称呼="战俘",n.名字=n.名称,null==n.年龄&&(n.经验=0,n.年龄=15+random(4)),收入储秀阁(n),出圣旨(n.名称+"虽是敌国之妃。但朕念之可怜，特将"+n.名称+"收入后宫。")}function 国王称呼计算(n){return _loc3_=1==n?"天皇":6==n?"赞普":12==n?"法老":13==n?"大公":3==n||5==n||7==n||11==n||17==n||20==n||21==n||22==n?"皇帝":0==n||9==n||14==n||14==n?"国王":"可汗",_loc3_}function 外国皇室(){for(var n=0;n<所有敌将.length;)void 0!==所有敌将[n].地位&&(i=所有敌将[n].文化,所有敌将[n].用过=1,0==所有敌将[n].地位?(所有敌将[n].身份=国王称呼计算(i),_all_nation[i].皇帝=new Object,_all_nation[i].皇帝._code=所有敌将[n]._code,_all_nation[i].皇帝.名称=所有敌将[n].名称,_all_nation[i].皇帝.家族=所有敌将[n].家族,_all_nation[i].皇帝.文化=i,_all_nation[i].皇帝.性别=0,_all_nation[i].皇帝.头像=所有敌将[n].跳,_all_nation[i].皇帝.年龄=28+random(5),_all_nation[i].i=0):((o=new Object).地位=所有敌将[n].地位,o.家族=所有敌将[n].家族,o.名称=所有敌将[n].名称,o.文化=所有敌将[n].文化,o.头像=所有敌将[n].跳,o.脉系=_all_nation[i].皇帝._code,o._code=所有敌将[n]._code,o.年龄=_all_nation[i].皇帝.年龄-16-2*o.地位-random(2),o.身份=外国皇子称呼计算(_all_nation[i].id,所有敌将[n].地位),o.婚配序号=void 0,o.儿女=0,_all_family.push(o),1==所有敌将[n].地位&&(_all_nation[i].皇帝.太子=所有敌将[n].名称,_all_nation[i].皇帝.太子性别=0,_all_nation[i].皇帝.太子身份=o.身份))),n+=1;for(var l=_all_nation[1].皇帝.家族=0;l<外域美人.length;)void 0!==外域美人[l].地位&&(i="杨奕承"==外域美人[l].名称?2:"李雪雁"==外域美人[l].名称?6:"李嵬名"==外域美人[l].名称?10:"李婼"==外域美人[l].名称?19:外域美人[l].文化,_loc8_=外域美人[l].地位,(外域美人[l].用过=1)==_loc8_||2==_loc8_?((o=new Object).地位=外域美人[l].地位,o.家族=外域美人[l].家族,o.名称=外域美人[l].名称,o.文化=外域美人[l].文化,o._code=外域美人[l]._code,o.头像=外域美人[l].跳,o.婚配序号=void 0,o.儿女=1,o.身份=外国后宫称呼计算(i,_loc8_)[0],_all_nation[i].i+=1,o.年龄=_all_nation[i].皇帝.年龄-16-2*_all_nation[i].i-random(2),o.年龄<=0&&(o.年龄=1),o.脉系=_all_nation[i].皇帝._code,1==外域美人[l].地位&&(_all_nation[i].皇帝.太子=外域美人[l].名称,_all_nation[i].皇帝.太子性别=1,_all_nation[i].皇帝.太子身份=o.身份),_all_family.push(o)):((o=new Object).地位=外域美人[l].地位,o.家族=外域美人[l].家族,o.名称=外域美人[l].名称,o.头像=外域美人[l].跳,o.文化=外域美人[l].文化,o._code=外域美人[l]._code,o.身份=外国后宫称呼计算(i,_loc8_)[0],o.年龄=_all_nation[i].皇帝.年龄-random(10),o.婚配序号=_all_nation[i].皇帝._code,o.脉系=void 0,_all_family.push(o),0==o.地位&&(_all_nation[i].皇帝.皇后=外域美人[l].名称))),l+=1;for(var i=0;i<_all_nation.length;){if(void 0!==_all_nation[i].皇帝){for(var o=0,n=0,a=0,l=0;o<_all_family.length;)_all_family[o].婚配序号==_all_nation[i].皇帝._code&&(n+=1),_all_family[o].脉系==_all_nation[i].皇帝._code&&0==_all_family[o].儿女&&(a+=1),_all_family[o].脉系==_all_nation[i].皇帝._code&&1==_all_family[o].儿女&&(l+=1),o+=1;null==_all_nation[i].皇帝.皇后&&"孟昶"!==_all_nation[i].皇帝.名称&&8!==_all_nation[i].id&&23!==_all_nation[i].id&&(_loc17_=生成外国女子(_all_nation[i]),_loc17_._code=16e3,_loc17_.地位=0,_loc17_.身份=外国后宫称呼计算(i,0)[0],_loc17_.介绍=_all_nation[i].名称+_loc17_.身份+"，"+国王称呼计算(i)+_all_nation[i].皇帝.名称+"的正妻。",_loc17_.婚配序号=_all_nation[i].皇帝._code,_loc17_.脉系=void 0,_loc17_.年龄=_all_nation[i].皇帝.年龄-random(5),_loc17_.头像=计算外域头像(_loc17_),"君士坦丁"==_all_nation[i].皇帝.名称&&(_loc17_.名称="海伦娜"),_all_family.push(_loc17_),_all_nation[i].皇帝.皇后=_loc17_.名称),n<=2&&7!==_all_nation[i].id&&13!==_all_nation[i].id&&8!==_all_nation[i].id&&23!==_all_nation[i].id&&(_loc17_=生成外国女子(_all_nation[i]),_loc17_._code=16e3,_loc17_.婚配序号=_all_nation[i].皇帝._code,_loc17_.脉系=void 0,_loc18_=外国后宫称呼计算(i,void 0),_loc17_.身份=_loc18_[0],_loc17_.地位=_loc18_[1],_loc17_.介绍=_all_nation[i].名称+国王称呼计算(i)+_all_nation[i].皇帝.名称+"的妃子。",_loc17_.年龄=_all_nation[i].皇帝.年龄-random(8),_loc17_.头像=计算外域头像(_loc17_),_all_family.push(_loc17_)),l<=1&&8!==_all_nation[i].id&&23!==_all_nation[i].id&&(_loc19_=生成外国女子(_all_nation[i],_all_nation[i].皇帝.家族),_loc19_._code=16e3,_loc19_.地位=2,_loc19_.脉系=_all_nation[i].皇帝._code,_loc19_.婚配序号=void 0,_loc19_.家族=_all_nation[i].皇帝.家族,_loc19_.身份=外国后宫称呼计算(i,2)[0],_loc19_.儿女=1,_loc19_.介绍=_all_nation[i].名称+_loc19_.身份+"，"+国王称呼计算(i)+_all_nation[i].皇帝.名称+"之女。",_loc19_.年龄=_all_nation[i].皇帝.年龄-16-2*l-random(2),_loc19_.头像=计算外域头像(_loc19_),"李旵"==_all_nation[i].皇帝.名称&&(_loc19_.名称="李莹",_loc19_.年龄=_all_nation[i].皇帝.年龄-16+2*l+random(2),_loc19_.介绍="顺天公主李莹，"+_all_nation[i].名称+_loc19_.身份+"，"+国王称呼计算(i)+_all_nation[i].皇帝.名称+"之女。"),_loc19_.年龄<=9&&(_loc19_.幼年=10*_loc19_.文化+random(10),20!=_loc19_.文化&&21!=_loc19_.文化&&22!=_loc19_.文化||(_loc19_.幼年=80+random(10))),_all_family.push(_loc19_)),null==_all_nation[i].皇帝.太子&&8!==_all_nation[i].id&&23!==_all_nation[i].id&&(_loc21_=生成外国男子(_all_nation[i],_all_nation[i].皇帝.家族),_loc21_._code=15e3,_loc21_.婚配序号=void 0,_loc21_.地位=1,_loc21_.脉系=_all_nation[i].皇帝._code,_loc21_.身份=外国皇子称呼计算(i,1),_loc21_.儿女=0,_loc21_.介绍=_all_nation[i].名称+_loc21_.身份+"，"+国王称呼计算(i)+_all_nation[i].皇帝.名称+"之子。",_loc21_.年龄=_all_nation[i].皇帝.年龄-16-a-random(2),_loc21_.头像=计算外域头像(_loc21_),"成明"==_all_nation[i].皇帝.名称&&(_loc21_.名称="宪平",_loc21_.介绍="冷泉天皇宪平，"+_all_nation[i].名称+_loc21_.身份+"，"+国王称呼计算(i)+_all_nation[i].皇帝.名称+"之子。"),_loc21_.年龄<=9&&(_loc21_.幼年=10*_loc21_.文化+random(10),20!=_loc21_.文化&&21!=_loc21_.文化&&22!=_loc21_.文化||(_loc21_.幼年=80+random(10))),_all_family.push(_loc21_),_all_nation[i].皇帝.太子=_loc21_.名称,_all_nation[i].皇帝.太子身份=_loc21_.身份,_all_nation[i].皇帝.太子性别=1),a<=1&&1!==_all_nation[i].太子性别&&8!==_all_nation[i].id&&23!==_all_nation[i].id&&(_loc22_=生成外国男子(_all_nation[i],_all_nation[i].皇帝.家族),_loc22_._code=15e3,_loc22_.婚配序号=void 0,_loc22_.地位=2,_loc22_.脉系=_all_nation[i].皇帝._code,_loc22_.身份=外国皇子称呼计算(i,2),_loc22_.儿女=0,_loc22_.介绍=_all_nation[i].名称+_loc22_.身份+"，"+国王称呼计算(i)+_all_nation[i].皇帝.名称+"之子。",_loc22_.年龄=_all_nation[i].皇帝.年龄-16-2*a-random(2),_loc22_.头像=计算外域头像(_loc22_),"成明"==_all_nation[i].皇帝.名称&&(_loc22_.名称="守平",_loc22_.介绍="圆融天皇守平，"+_all_nation[i].名称+_loc22_.身份+"，"+国王称呼计算(i)+_all_nation[i].皇帝.名称+"之子。"),_loc22_.年龄<=9&&(_loc22_.幼年=10*_loc22_.文化+random(10),20!=_loc22_.文化&&21!=_loc22_.文化&&22!=_loc22_.文化||(_loc22_.幼年=80+random(10))),_all_family.push(_loc22_))}i+=1}"孟昶"==_all_nation[20].皇帝.名称&&(_all_nation[20].皇帝.皇后="无")}function 进行外交确定(n){id("waijiaoyilan").style.display="none",id("礼明殿面板").style.display="block";var l=2*n.跳+1488,i=2*n.跳+1503;id("shizhe1").src="./images/"+l+".png",id("shizhe0").src="./images/"+i+".png",0==n.贸易年数?(id("lmdan0").style.display="none",id("lmdan1").style.display="none",id("lmdgb").style.display="block",0==n.外交?(id("lmddh").innerText="贸易什么的不可能了。\n来打仗吧。",id("lmdgb").onclick=function(){遵旨函数("与"+n.名称+"贸易失败。"),id("礼明殿面板").style.display="none"}):0<n.外交&&n.友好度<200?(id("lmddh").innerText="我国什么都不缺，暂时不想进行贸易。",id("lmdgb").onclick=function(){遵旨函数("与"+n.名称+"贸易失败。"),id("礼明殿面板").style.display="none"}):0<n.外交&&200<=n.友好度&&(id("lmddh").innerText="我们相信，和贵国的贸易往来是一件互利互惠的事情。",id("lmdgb").onclick=function(){遵旨函数("与"+n.名称+"贸易成功。"),n.贸易年数+=1,贸易额计算程序(n),大殿体力扣除程序(30),id("礼明殿面板").style.display="none"})):(id("lmdan0").style.display="block",id("lmdan1").style.display="block",id("lmdgb").style.display="none",id("lmdan0").innerText="断绝贸易",id("lmdan1").innerText="取消",id("lmddh").innerText="我国与贵国的贸易往来一向很有诚意，陛下如若毁约闭关，我国即从此断绝与贵国的贸易关系。",id("lmdan0").onclick=function(){遵旨函数("与"+n.名称+"断绝贸易。"),n.外交=0,n.友好度=0,n.贸易额=0,n.贸易年数=0,大殿体力扣除程序(30),id("礼明殿面板").style.display="none"},id("lmdan1").onclick=function(){id("礼明殿面板").style.display="none"})}function 贸易额计算程序(n){for(var l=0,i=0,o=0;o<_all_city.length;)8==_all_city[o].归属?i+=_all_city[o].人口:_all_city[o].归属==n.id&&(l+=_all_city[o].人口),o+=1;n.贸易额=Math.round((i-l)*n.友好度*.01+2e4*n.贸易年数*(属性.智力/2e3+属性.政治/2e3)-2e5),1e6<n.贸易额&&(n.贸易额=1e6)}function 礼明殿程序(){var n=_all_nation[主角.有客人[1]];展示外国信息(1,n)}function 交涉应答(n,l){id("waiguoxx").style.display="none",id("neishiMB").style.display="none",id("礼明殿面板").style.display="block",id("lmdan0").style.display="none",id("lmdan1").style.display="none",id("lmdgb").style.display="block";var i=2*n.跳+1488,o=2*n.跳+1503;id("shizhe1").src="./images/"+i+".png",id("shizhe0").src="./images/"+o+".png",id("lmdgb").onclick=function(){id("礼明殿面板").style.display="none",展示外国信息(1,n)},id("lmddh").innerText=l}function 外交送礼程序(n){1==主角.送钱示好?小提示("本月已经进行过了"):0==n.外交?交涉应答(n,"两国还在开战中，要是想停战还是签订正式的停战协议吧。"):(id("zhixingren").innerText="",id("zxrbg").onclick=function(){},id("数值拉动面板").style.display="block",id("range").value=0,id("range").max=国家.金钱,change(),id("rangeText").innerText="送礼的钱数多少会影响本次示好的外交效果。",id("rangeText").innerText+="\n\n要给对方多少钱",id("rqueding").onclick=function(){交涉应答(n,"我们已经收到来自贵国的财物。（友好度提升）"),国家.金钱-=Number(id("range").value),主角.送钱示好=1,n.友好度+=Math.round(Number(id("range").value)/4e5*(3-n.姿态)),999<n.友好度&&(n.友好度=999),记录大事件的程序("国家向"+n.名称+"送礼示好。"),id("数值拉动面板").style.display="none",更新资料()})}function 外交索要程序(n){var l;1==主角.索要金钱?小提示("本月已经进行过了"):(l=计算军事实力()-计算别国实力(n),console.log("实力c"+l),0==n.外交?交涉应答(n,"皇帝是不是忘记两国已经是水火不容的地步了。（索要失败）"):1<=n.外交&&400<n.友好度?外交索要成功程序(n,0):300<l&&200<n.友好度?外交索要成功程序(n,1):交涉应答(n,"我国无法答应贵国的这种要求。（索要失败）"))}function 外交索要成功程序(n,l){id("gzhjxz").style.display="block",id("gzhjTittle").innerText="索要",id("gzhjText").innerText="皇上想让对方进贡什么？",id("gzhjan0").innerText="金钱",id("gzhjan1").innerText="美女",id("gzhjan2").onclick=function(){id("gzhjxz").style.display="none"},id("gzhjan0").onclick=function(){id("gzhjxz").style.display="none",0==l?(_loc7_="我国愿意提供300万金钱以支援贵国的发展建设。（索要成功）",n.友好度-=50*(n.姿态+1),国家.金钱+=3e6,更新资料(),记录大事件的程序("国家向"+n.名称+"索要300万金钱。")):1==l&&(_loc7_="我们很愿意向贵国进贡500万金钱以支援贵国的发展建设。（索要成功）",n.友好度-=80*(n.姿态+1),国家.金钱+=5e6,更新资料(),记录大事件的程序("国家向"+n.名称+"索要500万金钱。")),交涉应答(n,_loc7_)},id("gzhjan1").onclick=function(){id("waiguoxx").style.display="none",id("gzhjxz").style.display="none",_loc3_=计算军事实力(),_loc4_=计算别国实力(n),_loc5_=_loc4_-_loc3_,id("neishiMB").style.display="block",id("neishi2").style.display="none",id("neishiBG").style.display="block",id("neishiBG").src=LJ+"a0aPic_BG/Tu_777543.jpg",id("neishiTitle").innerText="索要美女",id("neishiText").innerText="皇上需要对方进贡什么样的美女？",_loc8_=国王称呼计算(n.id),id("nsan0").innerText="贵族美女",id("nsan1").innerText="宗室美女",id("nsan2").innerText="嫡亲公主",id("nsan3").innerText=_loc8_+"嫔妃",id("nsan4").style.display="none",id("nsan5").style.display="none",id("nsan6").style.display="none",id("nsan7").style.display="none",id("nsan0").onclick=function(){1<=n.外交&&400<n.友好度?(_loc16_="我国愿意向贵国进献一名贵族美女。（索要成功）",_loc17_=生成外国女子(n),_loc17_.出身=_all_nation[n.id].名称+"贡女",_loc17_.介绍="一名经"+n.名称+"大臣在贵族间千挑万选，进献中原的美女。",_loc17_.年龄=15+random(4),_loc17_.生育=0,_loc17_.魅力=60+random(30),_loc17_._code=16001,_loc17_.头像=计算外域头像(_loc17_),收入储秀阁(_loc17_),n.友好度-=30*(n.姿态+1),记录大事件的程序(n.名称+"向国家进献一名贵族美女"+颜色代码(_loc17_.名称,"ff0000")+"。")):_loc16_="我国无法答应贵国的这种要求。（索要失败）",交涉应答(n,_loc16_)},id("nsan1").onclick=function(){1<=n.外交&&600<n.友好度?(_loc16_="我国愿意向贵国进献一名宗室美女。（索要成功）",_loc17_=生成外国女子(n),_loc17_.出身=_all_nation[n.id].名称+"贡女",_loc17_.介绍="一名经"+n.名称+国王称呼计算(n.id)+"在宗室间精挑细选，进献中原的贵女。",_loc17_.年龄=15+random(4),_loc17_.生育=0,_loc17_.魅力=70+random(30),_loc17_.头像=计算外域头像(_loc17_),_loc17_._code=16001,收入储秀阁(_loc17_),n.友好度-=30*(n.姿态+1),记录大事件的程序(n.名称+"向国家进献一名宗室贵女"+颜色代码(_loc17_.名称,"ff0000")+"。")):_loc16_="我国无法答应贵国的这种要求。（索要失败）",交涉应答(n,_loc16_)},id("nsan2").onclick=function(){2<=n.外交||650<n.友好度?外国皇室一览表(4,n.id):(_loc9_="我国无法答应贵国的这种要求。（索要失败）",交涉应答(n,_loc9_))},id("nsan3").onclick=function(){3<=n.外交&&400<n.友好度||500<_loc5_?外国皇室一览表(3,n.id):(_loc9_="什么？中原皇帝未免太胡来了！（索要失败）",交涉应答(n,_loc9_))}}}function 外交解盟程序(n){id("hukoupucha").style.display="block",id("huhouTitle").innerText="解盟",id("huhouText").innerText="解除同盟属于毁约，其对外交的影响十分恶劣，国家可能会在世界范围内被判为背信弃义，很难再找到盟友。确定要解除同盟吗？",id("hkan1").onclick=function(){id("hukoupucha").style.display="none"},id("hkan0").onclick=function(){id("hukoupucha").style.display="none";交涉应答(n,"那我们以后可就是敌人了。（同盟解除）"),n.外交=1,记录大事件的程序("国家与"+n.名称+"解除同盟。")}}function 外交同盟程序(n){var l;0==n.外交?l="皇帝是不是忘记两国已经是水火不容的地步了。（结盟失败）":1==n.外交&&800<n.友好度?(l="我们很愿意有贵国这样一个盟友。（结盟成功）",n.外交=2,记录大事件的程序("国家与"+n.名称+"结成同盟。")):l="我国和贵国关系平平，暂时还不想和贵国结盟。（结盟失败）",交涉应答(n,l)}function 外交议和程序(n){var l=计算军事实力(),l=计算别国实力(n)-l;if(400<l){var i="没什么好谈的，我国不同意停战。（议和失败）";交涉应答(n,i)}else if(l<=0)交涉应答(n,i="既然皇帝这么有诚意，我国同意各退其兵，和解停战。（议和成功）"),n.友好度=110,n.外交=1,记录大事件的程序("国家与"+n.名称+"达成停战协议。");else{var l=300<l?4:200<l?3:100<l?2:1,o=计算停战协议(l);if(id("tingzhan").style.display="block",null==o.赔款?id("tztext1").innerText="":id("tztext1").innerText="赔款：\n  "+o.赔款+"两",null==o.珍宝)id("tztext1").innerText+="";else for(id("tztext1").innerText+="珍宝：\n  ",d=0;d<o.珍宝.length;)停战协议界面.文本3.text+=所有物品[o.珍宝[d]].名称+"  ",d++;null==o.美女?id("tztext1").innerText+="":id("tztext1").innerText+="公主：\n  "+o.美女.名称+"公主出嫁"+n.名称,null==o.质子?id("tztext1").innerText+="":id("tztext1").innerText+="质子：\n  "+o.质子.名称+"皇子做人质",id("tztext0").innerText="【"+n.名称+"】提出以下条款，签订后方可停战：",id("tzan1").onclick=function(){id("tingzhan").style.display="none";交涉应答(n,"那就没什么好谈的，我国不同意停战。（议和失败）")},id("tzan0").onclick=function(){执行停战协议内容(n,o),id("tingzhan").style.display="block";交涉应答(n,"既然皇帝这么有诚意，我国同意各退其兵，和解停战。（议和成功）"),n.友好度=110,n.外交=1,记录大事件的程序("国家与"+n.名称+"签订条约，达成停战协议。"),更新资料()}}}function 执行停战协议内容(n,l){for(国家.金钱-=l.赔款,d=0;d<l.珍宝.length;)--所有物品[l.珍宝[d]].数量,d++;l.美女.婚=1,l.美女.状态=3,l.美女.封号="远嫁"+n,l.美女.婚配=n+"人",_all_family.push({id:_all_family.length,"名称":n+"人","年龄":random(5)+25,"婚配":l.美女.名称,"婚配序号":l.美女.id,"身份":"夫君","儿女":0});远嫁公主.push({id:l.美女.id,"寿命":30}),l.质子.状态=4,l.质子.封号="质押"+n.名称}function 计算停战协议(n){var l={"赔款":void 0,"珍宝":void 0,"美女":void 0,"质子":void 0},o=0<国家.金钱?Math.round(.1*国家.金钱*(2*n)+1e6):1e6;l.赔款=o;var a,e=[];for(i=0;i<所有物品.length;)所有物品[i].等级<6&&2<所有物品[i].等级&&1<所有物品[i].数量&&e.push(所有物品[i]),i++;e.sort(compare("等级")),a=e.length>n?n:e.length;var _=[];for(i=0;i<a;)_.push(e[i].id),i++;l.珍宝=_;var t=[],d=[];for(i=0;i<_all_child.length;)1==_all_child[i].性别&&16<_all_child[i].年龄&&9900!==_all_child[i]._code&&0==_all_child[i].状态&&t.push(_all_child[i]),0==_all_child[i].性别&&0==_all_child[i].状态&&8900!==_all_child[i]._code&&d.push(_all_child[i]),i++;return t.sort(compare("魅力")),d.sort(compare("关系")),3<=n&&0!==t.length&&(o=t[0],l.美女=o),4<=n&&0!==d.length&&(n=d[0],l.质子=n),l}function 敌国求和事件(n){阵营数据=_all_nation[n.归属],id("礼明殿面板").style.display="block";var l=2*阵营数据.跳+1488,i=2*阵营数据.跳+1503;if(id("shizhe1").src="./images/"+l+".png",id("shizhe0").src="./images/"+i+".png",刷新每个国家几城的程序(),3<=_all_nation[n.归属].城.length){for(l=0;l<_all_city.length;)_all_city[l].归属==n.归属&&l!==n.id&&(_loc22_=_all_city[l]),l++;id("lmddh").innerText="参见陛下。\n我们深知以自己蝼蚁之力抵挡贵国神兵是以卵击石。\n望陛下看在黎民苍生免遭涂炭的份上撤兵言和。\n我国愿意做天朝属国，并将"+_loc22_.名称+"割让。"}else id("lmddh").innerText="参见陛下。\n我们深知以自己蝼蚁之力抵挡贵国神兵是以卵击石。\n望陛下看在黎民苍生免遭涂炭的份上撤兵言和。\n我国愿意做天朝属国。";id("lmdan0").style.display="block",id("lmdan1").style.display="block",id("lmdgb").style.display="none",id("lmdan0").innerText="谈谈条件",id("lmdan0").onclick=function(){id("lmdan0").style.display="none",id("lmdan1").style.display="none",id("lmdgb").style.display="block",谈判条件(阵营数据)},id("lmdan1").innerText="拒绝",id("lmdan1").onclick=function(){_all_city[n.id].归属=8,_loc2_.removeMovieClip()}}function 谈判条件(n){id("neishiMB").style.display="block",id("neishi2").style.display="none",id("neishiBG").style.display="none",id("neishiTitle").innerText="谈判条件",id("neishiText").innerText="皇上需要让对方进贡什么？",id("nsan0").innerText="珍宝",id("nsan1").innerText="岁币",id("nsan2").innerText="美女",id("nsan3").innerText="质子";var l=new Object;l.珍宝=0,l.美女=0,l.公主=0,l.岁币=0,l.质子=0,l.皇子=0,l.太子=0,id("nsan0").onclick=function(){谈判条件选项(l,0)},id("nsan1").onclick=function(){谈判条件选项(l,1)},id("nsan2").onclick=function(){谈判条件选项(l,2,n)},id("nsan3").onclick=function(){谈判条件选项(l,3,n)},谈判条件.attachMovie("二级按钮-红色","确定",600,{_x:350,_y:350}),谈判条件.确定.文本.text="确定",谈判条件.确定.onclick=function(){trace(l.珍宝),trace(l.美女),trace(l.公主),trace(l.岁币),trace(l.质子),trace(l.皇子),trace(l.太子),判断对方是否会接受(l,n),id("neishiMB").style.display="none"}}function 谈判条件选项(n,l,i){var o=_root.attachMovie("内侍面板","内侍面板",90650,{_x:0,_y:0});0==l?(id("neishiTitle").innerText="珍宝",id("neishiText").innerText="皇上要让对方进献几件珍宝？",id("nsan0").innerText="无",id("nsan1").innerText="一件",id("nsan2").innerText="两件",id("nsan3").innerText="三件",id("nsan0").onclick=function(){n.珍宝=0,n.文本0="无",o.removeMovieClip()},id("nsan1").onclick=function(){n.珍宝=1,n.文本1="一件珍宝",o.removeMovieClip()},id("nsan2").onclick=function(){n.珍宝=2,n.文本2="两件珍宝",o.removeMovieClip()},id("nsan3").onclick=function(){n.珍宝=3,o.removeMovieClip()}):2==l?(o.文本.text="皇上要让对方进献一名什么样的女子？",o.文0.text="无",o.文1.text="贵族美女",o.文2.text="宗室美女",o.文3.text="皇室公主",id("nsan0").onclick=function(){n.美女=0,n.文本0="无",o.removeMovieClip()},id("nsan1").onclick=function(){n.美女+=1,n.文本1="贵族美女一名",o.removeMovieClip()},id("nsan2").onclick=function(){n.美女+=2,n.文本2="宗室美女一名",o.removeMovieClip()},id("nsan3").onclick=function(){n.公主=3,n.文本3="皇室公主一名",外国家眷一览表(8,i),o.removeMovieClip()}):1==l?(o.文本.text="皇上要让对方每年进贡多少岁币？",o.文0.text="无",o.文1.text="三百万两",o.文2.text="五百万两",o.文3.text="八百万两",id("nsan0").onclick=function(){n.岁币=0,谈判条件.文本0="无",o.removeMovieClip()},id("nsan1").onclick=function(){n.岁币=1,n.文本1="三百万两",o.removeMovieClip()},id("nsan2").onclick=function(){n.岁币=2,n.文本2="五百万两",o.removeMovieClip()},id("nsan3").onclick=function(){n.岁币=3,n.文本3="八百万两",o.removeMovieClip()}):3==l&&(o.文本.text="皇上要让对方交出哪个皇子做质子？",o.文0.text="无",o.文1.text="世子",o.文2.text="皇子",o.文3.text="太子",id("nsan0").onclick=function(){n.质子=0,n.文本0="无",o.removeMovieClip()},id("nsan1").onclick=function(){n.质子=1,n.文本1="交出一名世子做质子",o.removeMovieClip()},id("nsan2").onclick=function(){n.皇子=2,n.文本2="交出一名皇子做质子",外国家眷一览表(7,i),o.removeMovieClip()},id("nsan3").onclick=function(){n.太子=3,n.文本3="交出太子做质子",o.removeMovieClip()})}function 判断对方是否会接受(n,l){if(总要求=n.珍宝+n.美女+n.公主+n.岁币+n.质子+n.皇子+n.太子,总要求<=8){for(i.文本.text="我国很愿意进贡这些，望今后与贵国能永结同好。",_loc5_=0;_loc5_<n.珍宝;)来一个宝贝(),_loc5_+=1;for(1==n.岁币&&(l.岁币=3e6),2==n.岁币&&(l.岁币=5e6),3==n.岁币&&(l.岁币=8e6),_loc6_=生成外国女子(l),_loc6_.出身=_all_nation[l.id].名称+"贡女",_loc6_.简介="一名经"+l.名称+"大臣在贵族间精挑细选，进献中原的美女。",_loc6_.年龄=15+random(4),_loc6_.生育=0,_loc6_.魅力=60+random(30),_loc6_._code=9700+random(300),_loc6_.头像=计算外域头像(_loc6_),1==n.美女&&收入储秀阁(_loc6_),2==n.美女&&(_loc7_=生成外国女子(l),_loc7_.出身=l.名称+"贡女",_loc7_.简介="一名经"+l.名称+国王称呼计算(l.id)+"在宗室间精挑细选，进献中原的美女。",_loc7_.年龄=15+random(4),_loc7_.生育=0,_loc7_.魅力=60+random(30),_loc7_._code=9700+random(300),_loc7_.头像=计算外域头像(_loc7_),收入储秀阁(_loc7_)),3==n.美女&&(收入储秀阁(_loc6_),_loc7_=生成外国女子(l),_loc7_.出身=l.名称+"贡女",_loc7_.简介="一名经"+l.名称+国王称呼计算(l.id)+"在宗室间精挑细选，进献中原的美女。",_loc7_.年龄=15+random(4),_loc7_.生育=0,_loc7_.魅力=60+random(30),_loc7_._code=9700+random(300),_loc7_.头像=计算外域头像(_loc7_),收入储秀阁(_loc7_)),_loc13_=0;_loc13_<所有敌将.length&&所有敌将[_loc13_]._code!=a[0];)_loc13_+=1;for(_loc14_=0;_loc14_<外域美人.length&&外域美人[_loc14_]._code!=a[1];)_loc14_+=1;if(3==n.公主&&(收入储秀阁(外域美人[_loc14_]),--l.皇帝.公主,外域美人[_loc14_].地位=void 0,6e3<外域美人[_loc14_]._code&&外域美人.splice(_loc14_,1)),1==n.质子&&(_loc8_=生成外国男子(l),_loc8_.出身=l.名称+"世子",_loc8_.简介="一名经"+l.名称+国王称呼计算(l.id)+"在宗室间精挑细选，进献中原的美女。",_loc8_.年龄=15+random(4),_loc8_.生育=0,_loc8_.魅力=60+random(30),_loc8_._code=8700+random(300),_loc8_.头像=计算外域头像(_loc8_),_loc8_.跳=_loc8_.头像,_loc8_.被关押=1,_loc8_.抗拒=50+random(50),所有敌将.push(_loc8_)),2==n.皇子&&(所有敌将[_loc13_].被关押=1,--l.皇帝.皇子,所有敌将[_loc13_].地位=void 0,6e3<所有敌将[_loc13_]._code&&(所有敌将[_loc13_].抗拒=100+random(50))),3==n.太子){for(_loc12_=0;_loc12_<所有敌将.length;)1==所有敌将[_loc12_].地位&&所有敌将[_loc12_].文化==l.id&&(--l.皇帝.皇子,所有敌将[_loc12_].被关押=1,所有敌将[_loc12_].地位=void 0,l.太子.名字="无"),_loc12_+=1;for(_loc12_=0;_loc12_<外域美人.length;)1==外域美人[_loc12_].地位&&外域美人[_loc12_].文化==l.id&&(收入储秀阁(外域美人[_loc12_]),--l.皇帝.公主,外域美人[_loc12_].地位=void 0,l.太子.名字="无"),_loc12_+=1}if(_all_nation[l.id].外交=3,_all_nation[l.id].友好度=800,3<=l.城.length){_all_city[_loc22_.id].归属=8;for(var i=0;i<_all_city.length;)_all_city[i].归属==l.id&&l.id==_all_nation[l.id].都城&&(_all_nation[l.id].都城=_all_city[i].id),i+=1}记录大事件的程序(颜色代码(取数据.名称+"之战胜利，并接受了"+_all_nation[l.id].名称+"的求和请求。","5f5ffc"))}else i.文本.text="以我国的国力还不能提供这些，望陛下重新考虑。",n.珍宝=0,n.美女=0,n.公主=0,n.岁币=0,n.质子=0,n.皇子=0,n.太子=0}我国兵种=Array("刀兵","枪兵","弩兵","炮兵","刀骑兵","枪骑兵","弩骑兵","炮骑兵");