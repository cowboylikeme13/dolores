function 大殿体力扣除程序(i){isNaN(i)||void 0===i?小提示("传递参数异常"):(加载进步动画条的说("体力"),属性.体力-=i,属性.体力<5&&(id("出圣旨吧").style.display="none",宣政殿内.style.display="none",生病出图程序()),属性.体力<0&&(属性.体力=10),更新资料(属性栏))}function 遵旨函数(i){id("zunzhi").style.display="block",id("zunzhitext").innerText=i,setTimeout(function(){id("zunzhi").style.display="none"},3900)}function 开科考试函数(){0==主角.开科考试?(id("hukoupucha").style.display="block",id("huhouTitle").innerText="开科考试",id("huhouText").innerText="由皇上亲自制举，可招揽人才为朝廷效力。\n皇帝魅力和主考官魅力决定名臣出现率，皇帝的属性值决定随机人才相应属性的高低。\n要举行开科考试吗？",id("hkan1").onclick=function(){id("hukoupucha").style.display="none"},id("hkan0").onclick=function(){for(i=0;i<_all_rencai.length;)"吏部尚书"==_all_rencai[i].官职&&科举执行(_all_rencai[i]),i++;id("hukoupucha").style.display="none"}):小提示("开科考试已在准备，午后进行。")}function 科举处理(){id("taijianSh").style.display="block",id("taijian").style.backgroundPositionX="-224px",id("taijian").style.width="159px",id("taijianText").innerText="考生已到达考场，请移驾考场。",id("taijianCon").onclick=function(){开始科考咯(),id("taijianSh").style.display="none"}}function 科举执行(i){i.任务中=1,i.功勋+=10,主考官魅力=i.魅力,出圣旨("命"+i.名字+"主持科举考试，选拔优秀人才为朝廷效力。"),遵旨函数("已派【"+i.名字+"】执行科举。"),主角.开科考试=1}function 开始科考咯(){id("kaikekaoshi").style.display="block";for(var i,n=0,e=id("kaoshilbx"),l=1;l<13;)className("kaoshilbx").length<13&&((i=e.cloneNode(!0)).setAttribute("id","div-"+l),e.parentNode.appendChild(i)),n+=1,l+=1;for(var a=className("kaoshilbx"),t=0;t<13;){var d=className("xuanzhongle");d[t].onclick=function(){"0"==this.style.opacity?this.style.opacity="1":this.style.opacity="0"},a[t].style.top=25*t+95+"px",t++}for(var r=[],n=0;n<13;){for(var c,l=Math.round(15*主考官魅力/100)+Math.round(85*属性.魅力/1e3),o=random(400),s=[],_=0;_<所有历史名人.length;)null==所有历史名人[_].用过&&s.push(所有历史名人[_]),_+=1;o<=l&&0<s.length?(c=创建科举人才(),让这个人才变成名人(c)):((c=创建科举人才()).智力=random(75-Math.round(属性.智力/20))+Math.round(属性.智力/30),c.统帅=random(75-Math.round(属性.统帅/20))+Math.round(属性.统帅/30),c.武力=random(75-Math.round(属性.武力/20))+Math.round(属性.武力/30),c.政治=random(75-Math.round(属性.政治/20))+Math.round(属性.政治/30),100<属性.道德&&(c.清廉+=random(Math.round((属性.道德-100)/100*4)),89<c.清廉&&(c.清廉=89)),100<属性.魅力&&(c.忠诚+=random(Math.round((属性.魅力-100)/100*4)),89<c.忠诚&&(c.忠诚=89))),r.push(c),n+=1}for(l=0;l<r.length;)className("k1")[l].取=r[l],className("k1")[l].onclick=function(){官员详情展示(this.取)},className("k1")[l].innerText=r[l].名字,className("k2")[l].innerText=r[l].年龄,className("k3")[l].innerText=r[l].智力,className("k4")[l].innerText=r[l].武力,className("k5")[l].innerText=r[l].统帅,className("k6")[l].innerText=r[l].政治,className("k7")[l].innerText=r[l].魅力,r[l]._code<=7e3?className("k1")[l].style.color="#55aa00":className("k1")[l].style.color="#ffffff",80<=r[l].智力?className("k3")[l].style.color="#55aa00":className("k3")[l].style.color="#ffffff",80<=r[l].武力?className("k4")[l].style.color="#55aa00":className("k4")[l].style.color="#ffffff",80<=r[l].统帅?className("k5")[l].style.color="#55aa00":className("k5")[l].style.color="#ffffff",80<=r[l].政治?className("k6")[l].style.color="#55aa00":className("k6")[l].style.color="#ffffff",80<=r[l].魅力?className("k7")[l].style.color="#55aa00":className("k7")[l].style.color="#ffffff",l+=1;id("kaoshiguanbi").onclick=function(){决定选择谁金榜题名(d,r)}}function 决定选择谁金榜题名(i,n){for(var e=[],l=0;l<n.length;)"1"==i[l].style.opacity&&(e.push(n[l].名字),_all_rencai.push(n[l]),i[l].style.opacity="0"),l+=1;for(0==e.length?出圣旨("本期考试结束，无人中举。"):出圣旨("本期举办的制举考试圆满结束，金榜题名者有："+e+"。"),l=0;l<_all_rencai.length;)_all_rencai[l].id=l,l+=1;id("kaikekaoshi").style.display="none",时辰推进()}function 给谁封爵(i){id("fengjue").style.display="block",id("fjan").innerText="取消",id("fjText").innerText=i.名字+"目前的爵位："+i.爵位+"\n皇上想给他封什么爵呢？",id("fjan").onclick=function(){id("fengjue").style.display="none"};for(var n=0;n<6;)className("fengjue")[n].innerText=爵位名称[n],className("fengjue")[n].style.display="block",className("fengjue")[n].参数=n,className("fengjue")[n].onclick=function(){进行封爵(i,this.参数)},n++}function 进行封爵(i,n){var e="",l=n-i.爵位;i.爵位==n?(e="相同",小提示("与之前的爵位相同")):0==n?封爵(i,n,e,l,1):i.爵位>n?封爵(i,n,e="降级",l):i.爵位<n&&封爵(i,n,e="升格",l)}function 封爵(i,n,e,l,a){1==a?(i.忠诚+=20*l,i.忠诚<20&&(i.忠诚=20),出圣旨(i.名字+"削爵与士为伍。"),大殿体力扣除程序(10)):(i.忠诚+=10*l,100<i.忠诚?i.忠诚=100:i.忠诚<20&&(i.忠诚=20),l=各种封爵需要的地名[random(各种封爵需要的地名.length)],出圣旨(i.名字+e+"为"+l+爵位名称[n]+"，享爵位俸禄。"),大殿体力扣除程序(5)),id("fengjue").style.display="none",i.爵位=n,yilanbiao.style.display="none",人才列表显示(1)}function 换成这个官员(n,e){for(i=0;i<_all_rencai.length;)_all_rencai[i].名字==e.名字&&(_loc2_=_all_rencai[i].官职,_loc4_=_all_rencai[i].品阶,_loc5_=_all_rencai[i].地位,_all_rencai[i].官职=void 0,_all_rencai[i].品阶=计算人才品阶(_all_rencai[i].功勋),_all_rencai[i].地位=计算人才地位(_all_rencai[i].功勋)),i++;for(_loc3_=0;_loc3_<_all_rencai.length;)_all_rencai[_loc3_].名字==n.名字&&(_all_rencai[_loc3_].官职=_loc2_,_all_rencai[_loc3_].品阶=_loc4_,_all_rencai[_loc3_].地位=_loc5_),_loc3_+=1;出圣旨("任命"+n.名字+_loc2_+"一职，"+e.名字+"留用。")}function 外调官员函数(){id("hukoupucha").style.display="block",id("huhouTitle").innerText="辞退官员",id("huhouText").innerText="官员辞退后，再也不能回中央。\n请皇上详加考虑。",id("hkan1").onclick=function(){id("hukoupucha").style.display="none"},id("hkan0").onclick=function(){一个临时放官员名字的地方=[],id("hukoupucha").style.display="none",执行辞退官员()}}function 执行辞退官员(){yilanbiao.style.display="block",id("citui").style.display="block",yilanbiao.条件=0,id("citui").innerText="确定",id("citui").onclick=function(){for(var i=0;i<10;)className("l1")[i].style.color="#ffffff",i++;if(1==yilanbiao.条件){var e=[];for(n=0;n<_all_rencai.length;)1==_all_rencai[n].标记?(一个临时放官员名字的地方.push(_all_rencai[n].名字),删除跟这个人有关的三方相性(_all_rencai[n]),console.log(_all_rencai[n].名字)):null==_all_rencai[n].标记&&e.push(_all_rencai[n]),n++;_all_rencai=e,出圣旨("外调"+一个临时放官员名字的地方.length+"名官员前往地方任职，名单如下："+一个临时放官员名字的地方+"。"),大殿体力扣除程序(10),yilanbiao.style.display="none",id("citui").style.display="none",关联人才()}else{yilanbiao.style.display="none",id("citui").style.display="none";for(var l=0;l<_all_rencai.length;)_all_rencai[l].标记=void 0,l+=1}},临时人才列表=[];for(var i=0;i<_all_rencai.length;)0!=_all_rencai[i].任务中||null!=_all_rencai[i].官职&&"驸马都尉"!=_all_rencai[i].官职||(临时人才列表.push(_all_rencai[i]),_all_rencai[i].标记=void 0,console.log(_all_rencai[i].名字+_all_rencai[i].标记)),i+=1;序列=0,更新辞退官员信息(临时人才列表,yilanbiao,序列),id("yilanbiaoqian").onclick=function(){0<序列&&(--序列,更新辞退官员信息(临时人才列表,yilanbiao,序列))},id("yilanbiaohou").onclick=function(){序列<Math.round(临时人才列表.length/10)&&(序列+=1,更新辞退官员信息(临时人才列表,yilanbiao,序列))};var e=0;id("gynl").onclick=function(){e=0==e?(排序计算程序(临时人才列表,"年龄",0),1):(排序计算程序(临时人才列表,"年龄",1),0),序列=0,更新辞退官员信息(临时人才列表,yilanbiao,序列)},id("gyts").onclick=function(){e=0==e?(排序计算程序(临时人才列表,"统帅",0),1):(排序计算程序(临时人才列表,"统帅",1),0),序列=0,更新辞退官员信息(临时人才列表,yilanbiao,序列)},id("gywl").onclick=function(){e=0==e?(排序计算程序(临时人才列表,"武力",0),1):(排序计算程序(临时人才列表,"武力",1),0),序列=0,更新辞退官员信息(临时人才列表,yilanbiao,序列)},id("gyzl").onclick=function(){e=0==e?(排序计算程序(临时人才列表,"智力",0),1):(排序计算程序(临时人才列表,"智力",1),0),序列=0,更新辞退官员信息(临时人才列表,yilanbiao,序列)},id("gyzz").onclick=function(){e=0==e?(排序计算程序(临时人才列表,"政治",0),1):(排序计算程序(临时人才列表,"政治",1),0),序列=0,更新辞退官员信息(临时人才列表,yilanbiao,序列)},id("gyml").onclick=function(){e=0==e?(排序计算程序(临时人才列表,"魅力",0),1):(排序计算程序(临时人才列表,"魅力",1),0),序列=0,更新辞退官员信息(临时人才列表,yilanbiao,序列)},id("gypj").onclick=function(){e=0==e?(排序计算程序(临时人才列表,"地位",0),1):(排序计算程序(临时人才列表,"地位",1),0),序列=0,更新辞退官员信息(临时人才列表,yilanbiao,序列)},id("gyjw").onclick=function(){e=0==e?(排序计算程序(临时人才列表,"爵位",0),1):(排序计算程序(临时人才列表,"爵位",1),0),序列=0,更新辞退官员信息(临时人才列表,yilanbiao,序列)},id("gyzc").onclick=function(){e=0==e?(排序计算程序(临时人才列表,"忠诚",0),1):(排序计算程序(临时人才列表,"忠诚",1),0),序列=0,更新辞退官员信息(临时人才列表,yilanbiao,序列)}}function 更新辞退官员信息(i,e,n){for(var l=0;l<className("liebiaoxiang").length;){var a=i[10*n+l];null==a?className("liebiaoxiang")[l].style.display="none":(className("liebiaoxiang")[l].style.display="block",className("l1")[l].innerText=a.名字,className("l2")[l].innerText=a.官职,className("l3")[l].innerText=a.年龄,className("l4")[l].innerText=a.统帅,className("l5")[l].innerText=a.武力,className("l6")[l].innerText=a.智力,className("l7")[l].innerText=a.政治,className("l8")[l].innerText=a.魅力,className("l9")[l].innerText=a.品阶,className("l10")[l].innerText=爵位名称[a.爵位],className("l11")[l].innerText=a.忠诚,null==a.官职&&(className("l2")[l].innerText="赋闲"),className("liebiaoxiang")[l].取=a,className("liebiaoxiang")[l].序号=l,null==className("liebiaoxiang")[l].取.标记?className("l1")[l].style.color="#ffffff":1==className("liebiaoxiang")[l].取.标记&&(className("l1")[l].style.color="#ff0000")),className("liebiaoxiang")[l].onmouseover=function(){id("liebiaotx").style.display="block",void 0!==this.取._code?出现这个人的头像(id("liebiaotx"),this.取):新后宫图形读取程序(id("liebiaotx"),this.取,"特殊")},className("liebiaoxiang")[l].onmouseleave=function(){id("liebiaotx").style.display="none"},className("liebiaoxiang")[l].onclick=function(){if(2<this.取.朝廷势力&&0<this.取.后宫势力)小提示("众多大臣为此人求情，无法轻易辞退。");else if(""!==this.取.后宫相性&&void 0!==this.取.后宫相性){var i,n=this.取.家族;for(q=0;q<_all_feizi.length;)_all_feizi[q].名字==this.取.后宫相性&&0!==_all_feizi[q].孕&&(i=_all_feizi[q].家族),q++;n==i?小提示("为保皇嗣，怀孕嫔妃的亲属不可辞退。"):(e.条件=1,this.取.标记=1,className("l1")[this.序号].style.color="#ff0000")}else e.条件=1,console.log(e.条件),this.取.标记=1,className("l1")[this.序号].style.color="#ff0000"},l+=1}}function 关联人才(){for(var i=0;i<_all_city.length;){for(var n=_all_city[i],e=0;e<7;){for(var l=0;l<_all_rencai.length;)void 0!==n.委任者[e]&&n.委任者[e].名字==_all_rencai[l].名字&&(n.委任者[e]=_all_rencai[l]),l+=1;e+=1}i+=1}for(i=0;i<_all_army.length;){for(l=0;l<_all_rencai.length;)_all_army[i].将军.名字==_all_rencai[l].名字&&(_all_army[i].将军=_all_rencai[l]),l+=1;i+=1}}function 劝诱人才(){id("sy").style.display="block",id("syb").style.display="none",id("syb2").style.display="block",id("syTitle").innerText="劝诱人才",id("sysm").innerText="要请哪位隐士出仕？",id("qxsy").onclick=function(){id("syb").style.display="block",id("syb2").style.display="none",id("sy").style.display="none"};var i=[];for(_loc6_=0;_loc6_<所有隐士.length;)0==所有隐士[_loc6_].录用&&8==_all_city[所有隐士[_loc6_].地区].归属&&i.push(所有隐士[_loc6_]),_loc6_+=1;序列=0,整理隐士展示(i,序列),id("syqian").onclick=function(){1<=序列&&(--序列,整理隐士展示(i,序列))},id("syhou").onclick=function(){序列<i.length/32&&(序列+=1,整理隐士展示(i,序列))}}function 整理隐士展示(i,n){for(var e=0;e<32;){var l=i[32*n+e],a=className("sydb2")[e];null==l?a.style.display="none":(a.style.display="block",a.innerText=l.名称,a.取=l,a.onclick=function(){id("sy").style.display="none",展示隐士信息(this.取)}),e+=1}}function 展示隐士信息(i){id("介绍图an2").innerText="劝诱此人",id("介绍图an2").style.display="block",id("介绍图an0").style.display="none",id("介绍图an1").style.display="none",id("介绍图").style.display="block",id("介绍图an3").innerText="关闭",出现这个人的头像(id("介绍图头像"),i),id("介绍图名字").innerText=i.名称,id("介绍图介绍").innerText="文化圈："+_all_nation[i.文化].文化,id("介绍图介绍").innerText+="\n性  格："+i.性情,id("介绍图介绍").innerText+="\n所在地区："+_all_city[i.地区].名称,id("介绍图介绍").innerText+="\n介  绍：\n",id("介绍图介绍").innerText+=i.介绍,id("介绍图an2").onclick=function(){人才列表显示(31,i),id("介绍图").style.display="none",劝诱人才()},id("介绍图an3").onclick=function(){id("介绍图").style.display="none",id("sy").style.display="block"}}function 开始劝诱(u,y){大殿体力扣除程序(5),更新资料(属性栏),u.任务中=1,id("剧情对话").style.display="block",id("剧情背景").src=LJ+"a0aPic_BG/Tu_133133.jpg",出现这个人的头像(剧情头像,y),对话打字效果("（"+u.名字+"找到了"+y.名称+"开始说服）");var f=0,g="能得皇上赏识也是鄙人的荣幸。",x="对不起，鄙人还不想出仕。";剧情对话板.onclick=function(){var i,n,e,l,a,t,d,r,c,o,s,_;"介子推"==y.名称&&4==月?劝诱结果(u,y,f=1,g="四月寒食。介某人该以何报答君上呢。",x):"陶弘景"==y.名称&&8<=主角.丹药.length?劝诱结果(u,y,f=1,g="圣上炼了那么多丹药，想必对此很有研究吧，鄙人正好略懂医术，有机会还希望能和圣上探讨一二。",x):"管仲"==y.名称&&"鲍叔牙"==u.名字?劝诱结果(u,y,f=1,g="朋友,我们终于再次重逢了!",x):"诸葛孔明"==y.名称&&"刘备"==u.名字?劝诱结果(u,y,f=1,g="大梦谁先觉？平生我自知。草堂春睡足，窗外日迟迟。",x):"诸葛孔明"==y.名称&&"黄月英"==u.名字?劝诱结果(u,y,f=1,g="知我者，月英也。",x):"颜回"==y.名称&&"孔丘"==u.名字?劝诱结果(u,y,f=1,g="老师都来劝说了，哪有不出山的道理。",x):"周术"!=y.名称&&"东园公"!=y.名称&&"绮里季"!=y.名称&&"夏黄公"!=y.名称||"张良"!=u.名字?("速不台"==y.名称||"哲别"==y.名称||"完颜陈和尚"==y.名称||"木华黎"==y.名称)&&400<属性.统帅&&400<属性.武力?劝诱结果(u,y,f=1,g="呵呵呵，听说当今圣上武力高强，用兵如神，鄙人甚是佩服，愿意为其效力。",x):("苏格拉底"==y.名称||"柏拉图"==y.名称||"亚里士多德"==y.名称||"荷马"==y.名称)&&400<属性.智力&&400<属性.政治?劝诱结果(u,y,f=1,g="呵呵呵，听说当今圣上精通天文地理，治国有方，鄙人甚是佩服，愿意为其效力。",x):"阿基米德"==y.名称?(g="你很聪明，看来皇帝的智商也不会差。我会辅佐皇帝的。",x="对不起，你答错了，我不会辅佐皇帝的。",i=random(20)+1,n=random(20)+1,e=random(20)+1,l=random(10)+1,a=random(10)+100,s=i*n*e*l*9.8/1e3,d=t=Math.floor(1e4*s)/1e4,r=Math.floor(1e4*(d*(random(4)+1)+random(111)))/1e4,c=Math.floor(1e4*(1e3*d+random(111)))/1e4,o=Math.floor(1e4*(d+random(300)))/1e4,s=random(4),_=0==s?[d,c,r,o]:1==s?[r,c,d,o]:2==s?[r,d,c,o]:[o,r,c,d],对话打字效果(y.名称+"：如果你能答对此题，我就去辅佐皇帝。已知：金块长"+i+"cm，宽"+n+"cm，高"+e+"cm，金块密度为"+a+"g/cm^3，液体密度为"+l+"g/cm^3，重力加速度g为9.8N/kg。当它全部沉入一个充满液体的容器中后，它受到的浮力为多少N？",_),id("剧情an0").onclick=function(){_[0]==t&&(f=1),劝诱结果(u,y,f,g,x)},id("剧情an1").onclick=function(){_[1]==t&&(f=1),劝诱结果(u,y,f,g,x)},id("剧情an2").onclick=function(){_[2]==t&&(f=1),劝诱结果(u,y,f,g,x)},id("剧情an3").onclick=function(){_[3]==t&&(f=1),劝诱结果(u,y,f,g,x)}):u.统帅>y.统帅&&u.武力>y.武力&&u.智力>y.智力&&u.魅力>y.魅力?劝诱结果(u,y,f=1,g="能得皇上赏识也是鄙人的荣幸。",x):劝诱结果(u,y,f,g,x):劝诱结果(u,y,f=1,g="子房先生好口才，说的鄙人是不得不出山了。",x)}}function 劝诱结果(n,e,i,l,a){1==i?(对话打字效果(e.名称+"："+l),剧情对话板.onclick=function(){对话打字效果("（"+n.名字+"劝诱"+e.名称+"成功）");var i=创建新人才();让这个人才变成隐士(i,e),_all_rencai.push(i),e.录用=1,剧情对话板.onclick=function(){缓动黑幕(),id("剧情对话").style.display="none",劝诱人才()}}):(对话打字效果(e.名称+"："+a),剧情对话板.onclick=function(){对话打字效果("（"+n.名字+"劝诱"+e.名称+"失败）"),剧情对话板.onclick=function(){缓动黑幕(),id("剧情对话").style.display="none",劝诱人才()}})}function 征收钱粮选择(n){id("sy").style.display="none",id("gzhjxz").style.display="block",id("gzhjTittle").innerText="征收钱粮",id("gzhjText").innerText="请选择征收金钱还是粮食。",id("gzhjan0").innerText="金钱",id("gzhjan1").innerText="粮食",id("gzhjan2").onclick=function(){id("gzhjxz").style.display="none",id("sy").style.display="block"},id("gzhjan0").onclick=function(){for(i=0;i<_all_rencai.length;)"户部尚书"==_all_rencai[i].官职&&金钱上交拉动条(n,_all_rencai[i]),i++;id("gzhjxz").style.display="none"},id("gzhjan1").onclick=function(){for(i=0;i<_all_rencai.length;)"户部尚书"==_all_rencai[i].官职&&粮食上交拉动条(n,_all_rencai[i]),i++;id("gzhjxz").style.display="none"}}function 金钱上交拉动条(i,n){id("数值拉动面板").style.display="block",id("zhixingren").innerText="执行人："+n.名字,id("zxrbg").onclick=function(){id("数值拉动面板").style.display="none",人才列表显示(12,i)},id("range").value=0,id("range").max=i.金钱,change();var e=i.金钱-i.人口*i.工资;e<0&&(e=0),id("rangeText").innerText="从地方政府手中征收钱粮，执行官员的武力决定钱粮安全，清廉决定贪污程度。\n若地方府库银两不足发放百姓的工资，会降低民心以至于发生暴动；\n建议征收不超过："+e+"两以上。",id("rangeText").innerText+="\n\n需要征收多少金钱。",id("rqueding").onclick=function(){null==id("range").value?小提示("请拉动红条操作"):(出圣旨("命"+n.名字+"立即从"+i.名称+"城府库收取钱款"+id("range").value+"两上交中央。"),大殿体力扣除程序(10),i.金钱-=Number(id("range").value),国家.金钱+=Math.round(Number(id("range").value)*(.9+.001*n.清廉)),n.任务中=1,n.功勋+=10,id("数值拉动面板").style.display="none",id("sy").style.display="block",更新资料(属性栏))}}function 粮食上交拉动条(i,n,e){id("数值拉动面板").style.display="block",id("zhixingren").innerText="执行人："+n.名字,id("zxrbg").onclick=function(){id("数值拉动面板").style.display="none",人才列表显示(13,i)},id("range").value=0,id("range").max=i.粮食,change();var l=i.粮食-i.人口;l<0&&(l=0),id("rangeText").innerText="从地方政府手中征收钱粮，执行官员的武力决定钱粮安全，清廉决定贪污程度。\n若存粮不足，则遭遇灾害时无法赈灾。\n建议收粮不超过："+l+"石。",id("rangeText").innerText+="\n\n需要征收多少粮食。",id("rqueding").onclick=function(){null==id("range").value?小提示("请拉动红条操作"):(出圣旨("命"+n.名字+"立即从"+i.名称+"城府库收取粮食"+id("range").value+"石上交中央。"),大殿体力扣除程序(10),i.粮食-=Number(id("range").value),国家.粮食+=Math.round(Number(id("range").value)*n.清廉/100),n.任务中=1,n.功勋+=10,id("数值拉动面板").style.display="none",id("sy").style.display="block",更新资料(属性栏))}}function 百姓迁移到这里(i){地方发展界面(5,i)}function 移民拖动(i,n,e){id("数值拉动面板").style.display="block",id("zhixingren").innerText="执行人："+i.名字,id("zxrbg").onclick=function(){id("数值拉动面板").style.display="none",id("sy").style.display="none",人才列表显示(30,n,e)},id("range").value=0,id("range").max=Math.round(n.人口/4*i.政治/100),change();var l=Math.round(50+50*(1-i.清廉/100));id("rangeText").innerText="移民需要给百姓分发安置费，执行官员的政治决定可移民数量，清廉决定贪污程度。\n移民时最好确认移民地的农业发展度足够人口消耗，或者下发粮食足够百姓生活。\n"+n.名称+"人口："+n.人口+"\n"+e.名称+"人口："+e.人口+"\n安置费："+l+"两/人。",id("rangeText").innerText+="\n\n需要移民多少百姓。",id("rqueding").onclick=function(){null==id("range").value?小提示("请拉动红条操作"):(出圣旨(n.名称+"城内老旧小区危房甚多，时刻威胁人民群众的生命财产安全，今皇恩浩荡，特为"+n.名称+"城内"+id("range").value+"人添置新房，即刻命"+i.名字+"主持拆迁移民，将百姓妥善安置到"+e.名称+"城内。"),大殿体力扣除程序(50),n.人口-=Math.round(Number(id("range").value)),e.人口+=Math.round(Number(id("range").value)),国家.金钱-=Number(id("range").value)*l,i.任务中=1,i.功勋+=10,id("数值拉动面板").style.display="none",id("sy").style.display="none",更新资料(属性栏))}}function 粮食交易(){id("gzhjxz").style.display="block",id("gzhjTittle").innerText="粮食交易",id("gzhjText").innerText="请选择买入或卖出粮食。",id("gzhjan0").innerText="买入",id("gzhjan1").innerText="卖出",id("gzhjan2").onclick=function(){id("gzhjxz").style.display="none"},id("gzhjan0").onclick=function(){for(i=0;i<_all_rencai.length;)"户部尚书"==_all_rencai[i].官职&&买入粮食(_all_rencai[i]),i++;id("gzhjxz").style.display="none"},id("gzhjan1").onclick=function(){for(i=0;i<_all_rencai.length;)"户部尚书"==_all_rencai[i].官职&&卖出粮食(_all_rencai[i]),i++;id("gzhjxz").style.display="none"}}function 买入粮食(i){id("数值拉动面板").style.display="block",id("zhixingren").innerText="执行人："+i.名字,id("zxrbg").onclick=function(){id("数值拉动面板").style.display="none",人才列表显示(32)};var n=Math.round(5e6*i.政治/100*i.魅力/100),e=Math.round(国家.粮食/(100*国家.金钱));console.log("指数"+e),e<1&&(e=1),9<e&&(e=9);var l=Math.round((10+5*(2-i.智力/100))*(10-e));id("range").value=0,id("range").max=n,change(),id("rangeText").innerText="从外域商人处花钱购买粮食，但是粮食的基础价格会随着市场需求上下浮动。执行官员的智力决定买入价格，政治和魅力决定买入上限，清廉决定贪污程度。",id("rangeText").innerText+="\n\n买入价格"+l+"两/千石，需要买入多少粮食。",id("rqueding").onclick=function(){null==id("range").value?小提示("请拉动红条操作"):(出圣旨("命"+i.名字+"立即买入粮食"+id("range").value+"石。"),大殿体力扣除程序(10),国家.金钱-=Math.round(Number(id("range").value)*l*.01)*(2-i.清廉/100),国家.粮食+=Number(id("range").value),i.任务中=1,i.功勋+=5,id("数值拉动面板").style.display="none",更新资料(属性栏))}}function 卖出粮食(i){id("数值拉动面板").style.display="block",id("zhixingren").innerText="执行人："+i.名字,id("zxrbg").onclick=function(){id("数值拉动面板").style.display="none",人才列表显示(33)};var n=Math.round(5e6*i.政治/100*i.魅力/100);国家.粮食<=n&&(n=国家.粮食);var e=Math.round(国家.粮食/(100*国家.金钱));console.log("指数"+e),e<1&&(e=1),9<e&&(e=9),console.log("指数"+e);var l=Math.round(i.智力/100*1.4*(10-e));id("range").value=0,id("range").max=n,change(),id("rangeText").innerText="向外域商人出售粮食以获得金钱，但是粮食的基础价格会随着市场需求上下浮动。执行官员的智力决定卖出价格，政治和魅力决定卖出上限，清廉决定贪污程度。",id("rangeText").innerText+="\n\n卖出价格"+l+"两/千石，需要卖出多少粮食。",id("rqueding").onclick=function(){null==id("range").value?小提示("请拉动红条操作"):(出圣旨("命"+i.名字+"立即向外出售粮食"+id("range").value+"石。"),大殿体力扣除程序(10),国家.金钱+=Math.round(Number(id("range").value)*l*.01*i.清廉/100),国家.粮食-=Number(id("range").value),i.任务中=1,i.功勋+=5,id("数值拉动面板").style.display="none",更新资料(属性栏))}}function 祭祀函数(){for(i=0;i<_all_rencai.length;){if("礼部尚书"==_all_rencai[i].官职){_loc1_=_all_rencai[i];break}i++}id("hukoupucha").style.display="block",id("huhouTitle").innerText="祭祀",id("huhouText").innerText="祭祀能消弥灾难，祈求风调雨顺。要举行吗？\n执行人的智力越高，祭祀效率越高。\n礼部尚书："+_loc1_.名字+"。",id("hkan1").onclick=function(){id("hukoupucha").style.display="none"},id("hkan0").onclick=function(){0==主角.祭祀活动?(_loc1_.任务中=1,_loc1_.功勋+=10,出圣旨("朕将于午后王天坛祭祀天地，祈求风调雨顺，消灾解难。"),遵旨函数("已派【"+_loc1_.名字+"】执行祭祀。"),国库钱数变动的程序(-1e5),大殿体力扣除程序(70),id("hukoupucha").style.display="none",祭祀效率=Math.round(_loc1_.智力/10),主角.祭祀活动=1):小提示("已在操办祭祀事宜。")}}function 祭祀活动举行(){黑色幕布(),id("taijianSh").style.display="block",id("taijianText").innerText="祭祀活动已准备好了，请皇上亲临主祭。",id("taijian").style.backgroundPositionX="-224px",id("taijian").style.width="159px",id("taijianCon").onclick=function(){祭祀活动开始咯(),id("taijianSh").style.display="none"}}function 祭祀活动开始咯(){黑色幕布(),id("youyuan").style.display="block",id("yyBG").src=LJ+"a0aPic_BG/Tu_348763.jpg",id("yyText").innerText="祈求上苍保佑我国风调雨顺，国泰民安。",id("yykuang").onclick=function(){id("youyuan").style.display="none",void 0!==祭祀效率?主角.祭祀+=祭祀效率:主角.祭祀=4+random(4)}}function 废立皇储的剧情(){var n=[];for(i=0;i<_all_child.length;)0==_all_child[i].性别&&0==_all_child[i].状态&&n.push(_all_child[i]),i++;n.sort(compare(["朝廷势力","后宫势力"])),id("剧情对话").style.display="block",新后宫图形读取程序(id("剧情头像"),38,"特殊"),id("剧情背景").src=LJ+"a0aPic_BG/Tu_9.jpg",对话打字效果("大臣甲：皇上可要改立储君吗？废立皇储可是涉及国家根本之事，不可鲁莽啊。"),剧情对话板.onclick=function(){新后宫图形读取程序(id("剧情头像"),37,"特殊"),对话打字效果("大臣乙：是啊，皇上可要三思，不能随意按照喜好废立，一定要立一位德行兼优的皇子。"),剧情对话板.onclick=function(){新后宫图形读取程序(id("剧情头像"),39,"特殊"),对话打字效果("大臣丙：皇上，臣等支持"+n[0].名称+"皇子。"),剧情对话板.onclick=function(){新后宫图形读取程序(id("剧情头像"),36,"特殊"),对话打字效果("大臣丁：臣支持"+n[random(n.length)].名称+"皇子。"),剧情对话板.onclick=function(){对话打字效果("（大臣们众说纷纭，看来立储之事不能轻易处理）"),剧情对话板.onclick=function(){对话打字效果("大臣：还是请皇上来定夺吧。"),剧情对话板.onclick=function(){id("剧情对话").style.display="none",缓动黑幕()}}}}}}}function 废立皇储(){for(id("sy").style.display="block",id("syb").style.display="none",id("syb2").style.display="block",id("syTitle").innerText="",id("sysm").innerText="立谁为皇储",id("qxsy").onclick=function(){id("syb").style.display="block",id("syb2").style.display="none",id("sy").style.display="none"},n=0;n<_all_child.length;){var i;_all_child[n].id==国家.皇储id&&(i=_all_child[n]),n++}0!==i.状态?id("sysm").innerText+="（目前是：无）":id("sysm").innerText+="（目前是："+i.名称+"）",活着的皇子列表=[];for(var n=0;n<_all_child.length;)0==_all_child[n].性别&&0==_all_child[n].状态&&活着的皇子列表.push(_all_child[n]),n++;0==活着的皇子列表.length?(小提示("没有皇子，后继无人"),id("syb").style.display="block",id("syb2").style.display="none",id("sy").style.display="none"):(废立皇储的剧情(),序列=0,更新皇储信息(活着的皇子列表,序列),id("syqian").onclick=function(){0<序列&&(--序列,更新皇储信息(活着的皇子列表,序列))},id("syqian").onclick=function(){序列<Math.round(活着的皇子列表.length/20)&&(序列+=1,更新皇储信息(活着的皇子列表,序列))})}function 更新皇储信息(i,n){for(var e=0;e<32;){var l=i[20*n+e],a=className("sydb2")[e];null==l?a.style.display="none":(a.style.display="block",a.innerText=l.名称,a.取=l,a.onclick=function(){for(e=0;e<_all_child.length;){var i;_all_child[e].id==国家.皇储id&&(i=_all_child[e]),e++}this.取.id==i.id?小提示("目前的皇储就是他"):1!==i.状态&&2!==i.状态&&this.取.朝廷势力<i.朝廷势力?(console.log("想换的皇子的势力"+this.取.朝廷势力),console.log("原来的太子的势力"+i.朝廷势力),小提示("大臣们纷纷表示不妥，无法更换皇储")):(国家.皇储id=this.取.id,出圣旨("储贰之重，式固宗祧，一有元良，以贞万国。皇子"+this.取.名称+"，器质冲远，风猷昭茂，宏图夙著，美业日隆。孝惟德本，周於百行，仁为重任，以安万物。可立为皇太子。所司具礼，以时册命。"),id("syb").style.display="block",id("syb2").style.display="none",id("sy").style.display="none",大殿体力扣除程序(10))}),e++}}function 外交的总表(i,n){var e=刷新外交();刷新每个国家几城的程序(),id("waijiaoyilan").style.display="block";var l=[];if(1==i||2==i||3==i||4==i)for(var a=0;a<_all_nation.length;)0<_all_nation[a].城.length&&8!==_all_nation[a].id&&9!==_all_nation[a].id&&23!==_all_nation[a].id&&l.push(_all_nation[a]),a+=1;else for(a=0;a<e.length;)8!=e[a].id&&23!=e[a].id&&0!=e[a].城.length&&l.push(e[a]),a+=1;序列=0,刷新外交信息(l,序列,i,n),id("waijiaoqian").onclick=function(){0<序列&&(--序列,刷新外交信息(l,序列,i,n))},id("waijiaohou").onclick=function(){序列<Math.round(l.length/10)&&(序列+=1,刷新外交信息(l,序列,i,n))}}function 刷新外交信息(i,n,e,l){for(var a=0;a<className("waijiaolbx").length;){var t=i[10*n+a],d=className("waijiaolbx")[a];if(null==t)className("waijiaolbx")[a].style.display="none";else{className("waijiaolbx")[a].style.display="block";var r,c=0;for(f=0;f<t.城.length;)c+=t.城[f].士兵,t.城[f].人口,f++;className("w1")[a].innerText=t.名称,className("w2")[a].innerText=t.城.length,className("w3")[a].innerText=Math.round(c/1e4)+"万",className("w4")[a].innerText=外交状态[t.外交],1==t.外交&&((r=t.友好度)<=199?className("w4")[a].innerText="厌恶":200<=r&&r<=399?className("w4")[a].innerText="冷淡":400<=r&&r<=699?className("w4")[a].innerText="一般":700<=r&&r<=899?className("w4")[a].innerText="友善":900<=r&&r<=999&&(className("w4")[a].innerText="亲密")),className("w5")[a].innerText=Math.round(t.贸易额),className("w6")[a].innerText=Math.round(t.贸易年数),className("w7")[a].innerText=t.联姻+"个月",0==t.联姻&&(className("w7")[a].innerText="--"),className("w8")[a].innerText="--",d.取=t,d.onclick=function(){2==e?(出圣旨("宣"+this.取.名称+"使臣午后到礼明殿觐见，商榷两国外交事宜。"),主角.有客人=[1,this.取.id],属性.体力-=50,id("waijiaoyilan").style.display="none"):3==e?(进行外交确定(this.取,外交),id("waijiaoyilan").style.display="none"):4==e?选择公主远嫁面板(this.取):5==e||6==e||7==e?(查看血滴子详情程序(1,this.取,l),id("waijiaoyilan").style.display="none"):展示外国信息(0,this.取)}}a+=1}}function 展示外国信息(i,n){id("waiguoxx").style.display="block";for(var e=0,l=0;l<n.城.length;)e+=n.城[l].士兵,e+=n.城[l].人口,l++;1==i&&(id("wgxxbg").style.display="block",新后宫图形读取程序(id("wgxxbg"),777543,"背景"),id("wgan0").style.display="block",id("wgan4").style.display="none",id("wgan0").innerText="送礼",id("wgan0").onclick=function(){外交送礼程序(n)},id("wgan1").innerText="索要",id("wgan1").onclick=function(){外交索要程序(n)},0==n.外交?(id("wgan3").style.display="block",id("wgan3").innerText="停战议和",id("wgan3").onclick=function(){外交议和程序(n)}):id("wgan3").style.display="none",2==n.外交?(id("wgan2").innerText="解除同盟",id("wgan2").onclick=function(){外交解盟程序(n)}):(id("wgan2").innerText="请求同盟",id("wgan2").onclick=function(){外交同盟程序(n)})),0==i&&(id("wgxxbg").style.display="none",id("wgan0").innerText=国王称呼计算(n.id),id("wgan0").onclick=function(){出现这个皇室的介绍(n.皇帝)},id("wgan1").innerText="后妃",id("wgan1").onclick=function(){外国皇室一览表(0,n.id)},id("wgan2").innerText="皇子",id("wgan2").onclick=function(){外国皇室一览表(1,n.id)},id("wgan3").innerText="公主",id("wgan3").onclick=function(){外国皇室一览表(2,n.id)},id("wgan4").style.display="none",id("wgan3").style.display="block"),id("waiguoText").innerText=n.名称,id("wgxingxi").innerText="州府："+n.城.length,id("wgxingxi").innerText+="\n人口："+Math.round(e/1e4)+"万",id("wgxingxi").innerText+="\n士兵："+Math.round(e/1e4)+"万",id("wgxingxi").innerText+="\n兵种："+n.兵种,1==n.外交?(e=n.友好度)<=199?id("wgxingxi").innerText+="\n外交关系：厌恶":200<=e&&e<=399?id("wgxingxi").innerText+="\n外交关系：冷淡":400<=e&&e<=699?id("wgxingxi").innerText+="\n外交关系：一般":700<=e&&e<=899?id("wgxingxi").innerText+="\n外交关系：友善":900<=e&&e<=999&&(id("wgxingxi").innerText+="\n外交关系：亲密"):id("wgxingxi").innerText+="\n外交关系："+外交状态[n.外交],id("wgxingxi").innerText+="\n联姻："+n.联姻+"个月",id("wgxingxi").innerText+="\n贸易额："+Math.round(n.贸易额),id("wgxingxi").innerText+="\n贸易年数："+Math.round(n.贸易年数)+"年",id("zongshi").innerText="宗室\n",id("guobao").innerText="国宝";for(var a=0,e=0,t=0,d=0;a<_all_family.length;)_all_family[a].婚配序号==n.皇帝._code&&(e+=1),_all_family[a].脉系==n.皇帝._code&&0==_all_family[a].儿女&&(t+=1),_all_family[a].脉系==n.皇帝._code&&1==_all_family[a].儿女&&(d+=1),a+=1;id("zongshi").innerText+=国王称呼计算(n.id)+"："+n.皇帝.名称,id("zongshi").innerText+="\n"+外国后宫称呼计算(n.id,0)[0]+"："+n.皇帝.皇后,id("zongshi").innerText+="\n"+n.皇帝.太子身份+"："+n.皇帝.太子,id("zongshi").innerText+="\n后妃："+e+"人\n皇子："+t+"人\n公主："+d+"人"}function 刷新外交(){for(var i=0;i<_all_nation.length;)_all_nation[i].城=[],i+=1;for(i=0;i<_all_city.length;)_all_nation[_all_city[i].归属].城.push(_all_city[i]),i+=1;return _all_nation}function 地方发展界面(n,e,l){id("sy").style.display="block",id("syb").style.display="block",id("syTitle").innerText="地方列表",id("qxsy").onclick=function(){id("sy").style.display="none"};var a,t=[];for(i=0;i<_all_city.length;)8==_all_city[i].归属&&t.push(_all_city[i]),i++;4==n?id("sysm").innerText="让哪个地区的百姓迁出？":5==n?(黑色幕布(),id("sysm").innerText="将这些百姓迁移到哪个地方？"):id("sysm").innerText=6==n?"要将哪个城市分封出去？":"",0==t.length?(小提示("没有城池"),id("sy").style.display="none",id("syb").style.display="none"):(更新我方城池列表信息(n,t,a=0,e,l),id("syqian").onclick=function(){0<a&&更新我方城池列表信息(n,t,--a,e,l)},id("syhou").onclick=function(){a<Math.round(t.length/15)&&更新我方城池列表信息(n,t,a+=1,e,l)})}function 更新我方城池列表信息(n,e,l,a,t){for(var d=0;d<15;){var r=e[15*l+d];null==r?className("sydb")[d].style.display="none":(className("sydb")[d].style.display="block",className("sydb")[d].innerText=r.名称,className("sydb")[d].取=r,className("sydb")[d].onclick=function(){if(0==n)征收钱粮选择(this.取);else if(1==n)id("sy").style.display="none",下发补助选择(this.取);else if(2==n)if(0==this.取.行宫){for(i=0;i<_all_rencai.length;)"工部尚书"==_all_rencai[i].官职&&在这里建设行宫(this.取,_all_rencai[i]),i++;id("sy").style.display="none",id("syb").style.display="none"}else 小提示("这里已经建设了行宫了");else if(3==n)0!==this.取.行宫?(浩荡出巡程序哦(this.取),id("sy").style.display="none",id("syb").style.display="none"):小提示("这里还没有建设行宫");else if(4==n)百姓迁移到这里(this.取);else if(5==n)if(this.取.名称==a.名称)小提示("这个城市是移民源");else for(i=0;i<_all_rencai.length;)"户部尚书"==_all_rencai[i].官职&&移民拖动(_all_rencai[i],a,this.取),i++;else 6==n?1==this.取.地方委任?小提示("这个城市现在委任中，无法分封"):12==this.取.id?小提示("都城无法分封"):(子女封地确认(t,this.取),id("sy").style.display="none",id("syb").style.display="none"):展示该城市的信息(this.取)}),d+=1}}function 展示该城市的信息(i){id("difangfazhan").style.display="block",id("dfTitle").innerText=i.名称,id("dfbg").src=LJ+"azcPic_Jyou/"+i.id+".jpg",id("dftext0").innerText="【基本信息】\n人口："+Math.round(i.人口),id("dftext0").innerText+="\n等级："+i.等级,id("dftext0").innerText+="\n治安："+i.治安,id("dftext0").innerText+="\n工资："+i.工资,id("dftext0").innerText+="\n民心："+i.民心,id("dftext0").innerText+="\n府库银两："+Math.round(i.金钱),id("dftext0").innerText+="\n库存粮食："+Math.round(i.粮食),id("dftext0").innerText+="\n\n【产业】（库存/可征收）\n布匹："+i.布匹+"/"+i.民间布匹,id("dftext0").innerText+="\n瓷器："+i.瓷器+"/"+i.民间瓷器,id("dftext0").innerText+="\n矿石："+i.矿石+"/"+i.民间矿石,id("dftext0").innerText+="\n珠宝："+i.珠宝+"/"+i.民间珠宝,id("dftext0").innerText+="\n牲畜："+i.牲畜+"/"+i.民间牲畜,id("dftext1").innerText="【发展度】\n种植业："+i.种植业+"/"+i.种植业上限,0<i.丝织业上限&&(id("dftext1").innerText+="\n丝织业："+i.丝织业+"/"+i.丝织业上限),0<i.陶瓷业上限&&(id("dftext1").innerText+="\n陶瓷业："+i.陶瓷业+"/"+i.陶瓷业上限),0<i.采矿业上限&&(id("dftext1").innerText+="\n采矿业："+i.采矿业+"/"+i.采矿业上限),0<i.珠宝业上限&&(id("dftext1").innerText+="\n珠宝业："+i.珠宝业+"/"+i.珠宝业上限),0<i.畜牧业上限&&(id("dftext1").innerText+="\n畜牧业："+i.畜牧业+"/"+i.畜牧业上限),id("dftext1").innerText+="\n\n百姓存钱："+Math.ceil(i.民间金钱/i.人口)+"/人",id("dftext1").innerText+="\n百姓存粮："+Math.ceil(i.民间粮食/i.人口)+"/人",1==i.地方委任&&(id("dftext1").innerText+="\n\n【委任官员】",id("dftext1").innerText+="\n"+i.委任者[0].名字+";",id("dftext1").innerText+=i.委任者[1].名字+";",id("dftext1").innerText+=i.委任者[2].名字+";",id("dftext1").innerText+=i.委任者[3].名字+";",id("dftext1").innerText+=i.委任者[4].名字+";",id("dftext1").innerText+=i.委任者[5].名字+";",id("dftext1").innerText+=i.委任者[6].名字),id("调整工资").onclick=function(){调整工资(i)},id("征缴粮食").onclick=function(){征缴粮食(i)},id("治安巡查").onclick=function(){治安巡查(i)},id("一键建设").onclick=function(){一键建设(i)},id("地方委任").onclick=function(){地方委任(i)}}function 调整工资(i){var n;1==i.调整工资?小提示("本月该城已调整过工资"):(id("zhixingren").innerText="",id("zxrbg").onclick=function(){},id("数值拉动面板").style.display="block",id("range").value=i.工资,id("range").max=10,change(),id("rangeText").innerText="调整需谨慎，过低的工资会让百姓不满，减缓人口增长。\n当前该城工资："+i.工资+"两/人 每月",n=i.工资,id("rqueding").onclick=function(){null==id("range").value?小提示("请拉动红条操作"):id("range").value==n?小提示("没有做任何调整"):(id("range").value>n?(出圣旨("为加强地方建设，促进社会发展。特将工资由原来的"+n+"升为"+id("range").value+"。皇上隆恩披泽，乃国家之福。"),大殿体力扣除程序(5)):(出圣旨("为减轻城市财政负担，需将工资由原来的"+n+"下调为"+id("range").value+"，请按期领取。"),大殿体力扣除程序(10)),i.工资=Number(id("range").value),i.调整工资=1,id("数值拉动面板").style.display="none",id("zxrbg").style.display="block",id("zhixingren").style.display="block",更新城市数值展示(i),更新资料(属性栏))})}function 征缴粮食(i){if(1==i.征缴粮食)小提示("本季已进行过了");else{for(var n,e=0;e<_all_rencai.length;)"户部尚书"==_all_rencai[e].官职&&(n=_all_rencai[e]),e++;void 0!==n?征缴粮食拉动条(i,n):((n=创建新人才()).官职="户部尚书",n.品阶="三品",n.地位=6,_all_rencai.push(n))}}function 征缴粮食拉动条(i,n){id("zxrbg").onclick=function(){人才列表显示(2,i),id("数值拉动面板").style.display="none"},id("zhixingren").innerText="执行人："+n.名字,id("数值拉动面板").style.display="block",id("range").value=0,id("range").max=i.民间粮食;var e=i.民间粮食-10*i.人口;change(),id("rangeText").innerText="官员武力决定征粮时钱粮安全，清廉决定是否贪污。\n百姓手中的粮食不足以养活人口时，人口下降；\n百姓手中有余粮时，人口上升。\n建议为百姓留下多于人口的粮食数量。\n该城市人口："+i.人口+"人。建议征粮不超过："+e+"石。",id("rangeText").innerText+="\n\n需要征缴多少粮食。",id("rqueding").onclick=function(){null==id("range").value?小提示("请拉动红条操作"):(出圣旨("命"+n.名字+"本月在"+i.名称+"城内征缴粮食"+Number(id("range").value)+"石。"),大殿体力扣除程序(10),i.民间粮食-=Number(id("range").value),i.粮食+=Math.round(Number(id("range").value)*(.9+.001*n.清廉)),n.任务中=1,n.功勋+=10,i.征缴粮食=1,id("数值拉动面板").style.display="none",更新城市数值展示(i),更新资料(属性栏))}}function 治安巡查(i){if(1==i.治安巡查)小提示("本季已进行过了");else{for(var n,e=0;e<_all_rencai.length;)"兵部尚书"==_all_rencai[e].官职&&(n=_all_rencai[e]),e++;void 0!==n?治安巡查界面(i,n):((n=创建新人才()).官职="兵部尚书",n.品阶="三品",n.地位=6,_all_rencai.push(n))}}function 治安巡查界面(i,n){id("zxrbg").onclick=function(){人才列表显示(7,i),id("数值拉动面板").style.display="none"},id("zhixingren").innerText="执行人："+n.名字,id("数值拉动面板").style.display="block",id("rangeText").innerText="官员武力决定治安力度。治安保证城市生产力。\n该城市现在治安为："+i.治安,id("rangeText").innerText+="\n本次治安巡查经费：10000",id("rangeText").innerText+="\n\n是否执行本次治安巡查。",id("range").style.display="none",id("rangean").style.display="none",id("rangebg").style.display="none",id("rangeqian").style.display="none",id("rangezhi").style.display="none",id("rqueding").onclick=function(){i.金钱-=1e4,i.治安+=Math.round(20*n.武力/100),100<i.治安&&(i.治安=100),出圣旨("命"+n.名字+"本月在"+i.名称+"城内进行治安巡查。"),n.任务中=1,n.功勋+=10,i.治安巡查=1,id("数值拉动面板").style.display="none",id("range").style.display="block",id("rangean").style.display="block",id("rangeqian").style.display="block",id("rangebg").style.display="block",id("rangezhi").style.display="block",更新资料(属性栏)}}function 一键建设(n){if(1==n.一键建设)小提示("本季已进行过了");else{for(i=0;i<_all_rencai.length;){var e,l;"户部尚书"==_all_rencai[i].官职&&(e=_all_rencai[i]),"工部尚书"==_all_rencai[i].官职&&(l=_all_rencai[i]),i++}一键建设执行(n,e,l)}}function 一键建设执行(i,n,e){for(var l=0,a=0;a<_all_city.length;)8!=_all_city[a].归属&&23!=_all_city[a].归属||l++,a++;var t=Math.round(i.人口*i.工资*(1.3-.3*n.清廉/100)),d=.8*(1+.01*l)*.25*(n.智力/100+n.清廉/100+n.清廉/100+n.智力/100),r=i.民间布匹*(所有卖出价[0]-所有收购价[0]),c=Math.floor(r*d*Math.pow(i.丝织业,.058823529411764705)),o=i.民间瓷器*(所有卖出价[1]-所有收购价[1]),s=Math.floor(o*d*Math.pow(i.陶瓷业,.058823529411764705)),_=i.民间矿石*(所有卖出价[2]-所有收购价[2]),r=Math.floor(_*d*Math.pow(i.采矿业,.058823529411764705)),o=i.民间珠宝*(所有卖出价[3]-所有收购价[3]),_=Math.floor(o*d*Math.pow(i.珠宝业,.058823529411764705)),o=i.民间牲畜*(所有卖出价[5]-所有收购价[5]),d=Math.floor(o*d*Math.pow(i.畜牧业,.058823529411764705));i.民间布匹=0,i.民间瓷器=0,i.民间矿石=0,i.民间珠宝=0,i.民间牲畜=0;s=Math.round(c+s+r+_+d),r=Math.floor(.2*s*(1.5-e.清廉/100)),_=Math.floor(.3*s*(1.5-e.清廉/100)),d=Math.floor(.05*i.人口),_=Math.round(s-t-r-d-_);i.负债=_<0?1:void 0,i.金钱+=_,i.金钱=Math.round(i.金钱),i.粮食=Math.round(i.粮食),i.种植业+=Math.round(4*e.政治),0<=i.种植业-i.种植业上限&&(i.种植业=i.种植业上限),i.丝织业+=Math.round(.04*e.政治),0<=i.丝织业-i.丝织业上限&&(i.丝织业=i.丝织业上限),i.陶瓷业+=Math.round(.04*e.政治),0<=i.陶瓷业-i.陶瓷业上限&&(i.陶瓷业=i.陶瓷业上限),i.采矿业+=Math.round(.04*e.政治),0<=i.采矿业-i.采矿业上限&&(i.采矿业=i.采矿业上限),i.珠宝业+=Math.round(.04*e.政治),0<=i.珠宝业-i.珠宝业上限&&(i.珠宝业=i.珠宝业上限),i.畜牧业+=Math.round(.04*e.政治),0<=i.畜牧业-i.畜牧业上限&&(i.畜牧业=i.畜牧业上限),i.种植业上限+=Math.round(666*e.武力/100),i.丝织业上限+=Math.round(3*e.智力/100),i.陶瓷业上限+=Math.round(3*e.智力/100),i.采矿业上限+=Math.round(3*e.统帅/100),i.珠宝业上限+=Math.round(3*e.政治/100),i.畜牧业上限+=Math.round(3*e.统帅/100),5e5<i.种植业上限&&(i.种植业上限=5e5),1200<i.丝织业上限&&(i.丝织业上限=1200),1200<i.陶瓷业上限&&(i.陶瓷业上限=1200),1200<i.采矿业上限&&(i.采矿业上限=1200),1200<i.珠宝业上限&&(i.珠宝业上限=1200),1200<i.畜牧业上限&&(i.畜牧业上限=1200),n.任务中=1,n.功勋+=10,e.任务中=1,e.功勋+=10,小提示("一键建设完毕"),i.一键建设=1,更新城市数值展示(i)}function 地方委任(e){id("dfwr").style.display="block",1==e.地方委任?(id("wrjc").style.display="block",id("wrqueding").style.display="none"):(id("wrjc").style.display="none",id("wrqueding").style.display="block"),id("wrjc").onclick=function(){for(出圣旨("解除委任"+e.委任者[0].名字+"等人在"+e.名称+"城内的独立发展。"),i=0;i<_all_rencai.length;){for(d=0;d<7;)_all_rencai[i].名字==e.委任者[d].名字&&(_all_rencai[i].任务中=0,_all_rencai[i].委任城市=void 0),d++;i++}e.地方委任=0,e.委任者=[],更新资料(),更新城市数值展示(e),id("dfwr").style.display="none"},null==e.委任者[0]?id("wr0").innerText="刺史（上缴府库/清）：":id("wr0").innerText="刺史（上缴府库/清）："+e.委任者[0].名字,id("wrbg0").onclick=function(){人才列表显示(80,e)},null==e.委任者[1]?id("wr1").innerText="征缴粮食（武/清）：":id("wr1").innerText="征缴粮食（武/清）："+e.委任者[1].名字,id("wrbg1").onclick=function(){人才列表显示(81,e)},null==e.委任者[2]?id("wr2").innerText="收购物资（智/清）：":id("wr2").innerText="收购物资（智/清）："+e.委任者[2].名字,id("wrbg2").onclick=function(){人才列表显示(82,e)},null==e.委任者[3]?id("wr3").innerText="商馆交易（智/清）：":id("wr3").innerText="商馆交易（智/清）："+e.委任者[3].名字,id("wrbg3").onclick=function(){人才列表显示(83,e)},null==e.委任者[4]?id("wr4").innerText="发展建设（政）：":id("wr4").innerText="发展建设（政）："+e.委任者[4].名字,id("wrbg4").onclick=function(){人才列表显示(84,e)},null==e.委任者[5]?id("wr5").innerText="城市扩张（政/武/统）：":id("wr5").innerText="城市扩张（政/武/统）："+e.委任者[5].名字,id("wrbg5").onclick=function(){人才列表显示(85,e)},null==e.委任者[6]?id("wr6").innerText="治安巡查（武）：":id("wr6").innerText="治安巡查（武）："+e.委任者[6].名字,id("wrbg6").onclick=function(){人才列表显示(86,e)},id("qxwr").onclick=function(){if(1==e.地方委任)id("dfwr").style.display="none";else for(id("dfwr").style.display="none",i=0;i<7;)void 0!==e.委任者[i]&&(e.委任者[i].任务中=0,e.委任者[i].委任城市=void 0,e.委任者[i]=void 0,e.委任者=[]),i++},id("wrText").innerText=e.名称+"地方委任名单",id("wrqueding").onclick=function(){var n=0;for(i=0;i<7;)null!=e.委任者[i]&&(n+=1),i++;if(7==n){for(出圣旨("委任"+e.委任者[0].名字+"等人在"+e.名称+"城内进行独立发展，治理一方。"),i=0;i<7;)e.委任者[i].任务中=2,e.委任者[i].委任城市=e.id,i++;e.地方委任=1,id("dfwr").style.display="none",更新城市数值展示(e),更新资料()}else 小提示("委任者名单有空缺，无法委任")}}function 更新城市数值展示(i){id("dftext0").innerText="【基本信息】\n人口："+Math.round(i.人口),id("dftext0").innerText+="\n等级："+i.等级,id("dftext0").innerText+="\n治安："+i.治安,id("dftext0").innerText+="\n工资："+i.工资,id("dftext0").innerText+="\n民心："+i.民心,id("dftext0").innerText+="\n府库银两："+Math.round(i.金钱),id("dftext0").innerText+="\n库存粮食："+Math.round(i.粮食),id("dftext0").innerText+="\n\n【产业】（库存/可征收）\n布匹："+i.布匹+"/"+i.民间布匹,id("dftext0").innerText+="\n瓷器："+i.瓷器+"/"+i.民间瓷器,id("dftext0").innerText+="\n矿石："+i.矿石+"/"+i.民间矿石,id("dftext0").innerText+="\n珠宝："+i.珠宝+"/"+i.民间珠宝,id("dftext0").innerText+="\n牲畜："+i.牲畜+"/"+i.民间牲畜,id("dftext1").innerText="【发展度】\n种植业："+i.种植业+"/"+i.种植业上限,0<i.丝织业上限&&(id("dftext1").innerText+="\n丝织业："+i.丝织业+"/"+i.丝织业上限),0<i.陶瓷业上限&&(id("dftext1").innerText+="\n陶瓷业："+i.陶瓷业+"/"+i.陶瓷业上限),0<i.采矿业上限&&(id("dftext1").innerText+="\n采矿业："+i.采矿业+"/"+i.采矿业上限),0<i.珠宝业上限&&(id("dftext1").innerText+="\n珠宝业："+i.珠宝业+"/"+i.珠宝业上限),0<i.畜牧业上限&&(id("dftext1").innerText+="\n畜牧业："+i.畜牧业+"/"+i.畜牧业上限),id("dftext1").innerText+="\n\n百姓存钱："+Math.ceil(i.民间金钱/i.人口)+"/人",id("dftext1").innerText+="\n百姓存粮："+Math.ceil(i.民间粮食/i.人口)+"/人",1==i.地方委任&&(id("dftext1").innerText+="\n\n【委任官员】",id("dftext1").innerText+="\n"+i.委任者[0].名字+";",id("dftext1").innerText+=i.委任者[1].名字+";",id("dftext1").innerText+=i.委任者[2].名字+";",id("dftext1").innerText+=i.委任者[3].名字+";",id("dftext1").innerText+=i.委任者[4].名字+";",id("dftext1").innerText+=i.委任者[5].名字+";",id("dftext1").innerText+=i.委任者[6].名字)}function change(){id("range").style.display="block",id("rangean").style.display="block",id("rangeqian").style.display="block",id("rangebg").style.display="block",id("rangezhi").style.display="block";var i=id("range").value,n=id("range").max;id("rangezhi").innerHTML=i;n=Math.ceil(i/n*399)+"px";id("rangeqian").style.width=n,id("range").onmouseover=function(){id("rangean").style.backgroundPositionX="-39px"},id("range").onmouseleave=function(){id("rangean").style.backgroundPositionX="0px"},id("rangean").style.transform="translateX("+n+")"}function 下发补助选择(n){id("gzhjxz").style.display="block",id("gzhjTittle").innerText="下发补助",id("gzhjText").innerText="请选择下发金钱还是粮食。",id("gzhjan0").innerText="金钱",id("gzhjan1").innerText="粮食",id("gzhjan2").onclick=function(){id("gzhjxz").style.display="none"},id("gzhjan0").onclick=function(){for(i=0;i<_all_rencai.length;)"户部尚书"==_all_rencai[i].官职&&金钱下发拉动条(n,_all_rencai[i]),i++;id("gzhjxz").style.display="none"},id("gzhjan1").onclick=function(){for(i=0;i<_all_rencai.length;)"户部尚书"==_all_rencai[i].官职&&粮食下发拉动条(n,_all_rencai[i]),i++;id("gzhjxz").style.display="none"}}function 金钱下发拉动条(i,n){id("数值拉动面板").style.display="block",id("zhixingren").innerText="执行人："+n.名字,id("zxrbg").onclick=function(){id("数值拉动面板").style.display="none",人才列表显示(14,i)},id("range").value=0,id("range").max=国家.金钱,change();var e=i.人口*i.工资-i.金钱;e<0&&(e=0),id("rangeText").innerText="向地方政府下发钱粮补助，执行官员的武力决定钱粮安全，清廉决定贪污程度。\n若地方府库银两不足发放百姓的工资，会降低民心以至于发生暴动；\n建议发放："+e+"两以上。",id("rqueding").onclick=function(){null==id("range").value?小提示("请拉动红条操作"):(出圣旨("命"+n.名字+"立即到"+i.名称+"城内下发中央补助钱款"+Number(id("range").value)+"两。"),大殿体力扣除程序(10),i.金钱+=Math.round(Number(id("range").value)*n.清廉/100),国家.金钱-=Number(id("range").value),n.任务中=1,n.功勋+=10,id("数值拉动面板").style.display="none",id("sy").style.display="block",更新资料(属性栏))}}function 粮食下发拉动条(i,n,e){id("数值拉动面板").style.display="block",id("zhixingren").innerText="执行人："+n.名字,id("zxrbg").onclick=function(){id("数值拉动面板").style.display="none",人才列表显示(15,i)},id("range").value=0,id("range").max=国家.粮食,change();var l=10*i.人口-i.粮食;l<0&&(l=0),id("rangeText").innerText="向地方政府下发钱粮补助，执行官员的武力决定钱粮安全，清廉决定贪污程度。\n若存粮不足，则遭遇灾害时无法赈灾。\n建议下发："+l+"石以上。",id("rqueding").onclick=function(){null==id("range").value?小提示("请拉动红条操作"):(出圣旨("命"+n.名字+"立即向"+i.名称+"城内下发中央补助粮食"+id("range").value+"石。"),大殿体力扣除程序(10),i.粮食+=Math.round(Number(id("range").value)*n.清廉/100),国家.粮食-=Number(id("range").value),n.任务中=1,n.功勋+=10,id("数值拉动面板").style.display="none",id("sy").style.display="block",更新资料(属性栏))}}function 购买武器函数(){for(i=0;i<_all_rencai.length;)"户部尚书"==_all_rencai[i].官职&&购买武器选择(_all_rencai[i]),i++}function 购买武器选择(i){id("fengjue").style.display="block",id("fjan").innerText="取消",id("fjText").innerText="皇上，想在各地征购什么装备。执行人的政治决定购买数量上限，清廉决定价格。",id("fjan").onclick=function(){id("fengjue").style.display="none"};for(var n=0;n<6;)n<4?(className("fengjue")[n].innerText=武器名称[n],className("fengjue")[n].style.display="block",className("fengjue")[n].参数=n,className("fengjue")[n].onclick=function(){具体武器购买(i,武器名称[this.参数],this.参数),id("fengjue").style.display="none"}):className("fengjue")[n].style.display="none",n++}function 具体武器购买(i,n,e){var l;国家.金钱<0?小提示("国库已无银两"):(id("数值拉动面板").style.display="block",id("zhixingren").innerText="执行人："+i.名字,id("zxrbg").onclick=function(){人才列表显示(16)},id("range").value=0,"朴刀"==n?(id("range").max=Math.round(1e5*i.政治/100),_loc1_=Math.round(国家.朴刀/1e4)):"长枪"==n?(id("range").max=Math.round(8e4*i.政治/100),_loc1_=Math.round(国家.长枪/1e4)):"战马"==n?(id("range").max=Math.round(3e4*i.政治/100),_loc1_=Math.round(国家.战马/1e4)):"弓弩"==n&&(id("range").max=Math.round(5e4*i.政治/100),_loc1_=Math.round(国家.弓弩/1e4)),change(),_loc2_=id("range").max,l=4,1==e?l=Math.round(4*(3-i.智力/100-i.清廉/100)):2==e?l=Math.round(8*(3-i.智力/100-i.清廉/100)):3==e?l=Math.round(18*(3-i.智力/100-i.清廉/100)):4==e&&(l=Math.round(12*(3-i.智力/100-i.清廉/100))),id("rangeText").innerText="士兵配备武装能发挥更强的战斗力。\n执行官员政治决定购买数量，智力和清廉决定价格。\n目前国库有"+n+"："+_loc1_+"万，\n全国可以征购的"+n+"："+_loc2_+"。",id("rangeText").innerText+="\n\n需要征购多少"+n+"，单价："+l+"两。",id("rqueding").onclick=function(){null==id("range").value?小提示("请拉动红条操作"):0<Number(id("range").value)&&好的武器成交(Number(id("range").value),i,n,e)})}function 好的武器成交(i,n,e,l){var a=4;1==l?a=Math.round(4*(3-n.智力/100-n.清廉/100)):2==l?a=Math.round(8*(3-n.智力/100-n.清廉/100)):3==l?a=Math.round(18*(3-n.智力/100-n.清廉/100)):4==l&&(a=Math.round(12*(3-n.智力/100-n.清廉/100)));l=a*i;国家.金钱<l?小提示("国库银两不够"):(主角.武器购买=1,n.任务中=1,n.功勋+=10,"朴刀"==e?国家.朴刀+=i:"长枪"==e?国家.长枪+=i:"战马"==e?国家.战马+=i:"弓弩"==e&&(国家.弓弩=国家.弓弩+i),国库钱数变动的程序(-1*l),出圣旨("中央军队增加武装"+e+":"+i+"。单价："+a+"两，购买经费："+l+"两。"),大殿体力扣除程序(10),id("数值拉动面板").style.display="none",id("fengjue").style.display="none",更新资料(属性栏))}function 招募士兵面板(){if(1==主角.招募士兵)小提示("本季已进行过招募士兵");else{for(var i,n=0;n<_all_rencai.length;)"兵部尚书"==_all_rencai[n].官职&&(i=_all_rencai[n]),n++;void 0!==i?招募士兵拉动条(i):((i=创建新人才()).官职="兵部尚书",i.品阶="三品",i.地位=6,_all_rencai.push(i))}}function 招募士兵拉动条(i){id("数值拉动面板").style.display="block",id("zhixingren").innerText="执行人："+i.名字,id("zxrbg").onclick=function(){id("数值拉动面板").style.display="none",人才列表显示(17)},执行数值拉动(2,void 0,i)}function 解甲归田面板(){if(1==主角.卸甲归田)小提示("本季已进行过了");else{for(var i,n=0;n<_all_rencai.length;)"兵部尚书"==_all_rencai[n].官职&&(i=_all_rencai[n]),n++;void 0!==i?解甲归田拉动条(i):((i=创建新人才()).官职="兵部尚书",i.品阶="三品",i.地位=6,_all_rencai.push(i))}}function 解甲归田拉动条(i){id("数值拉动面板").style.display="block",id("zhixingren").innerText="执行人："+i.名字,id("zxrbg").onclick=function(){id("数值拉动面板").style.display="none",人才列表显示(18)},执行数值拉动(3,void 0,i)}function 招揽民夫面板(){if(1==主角.招募民夫)小提示("本季已进行过招募民夫");else for(i=0;i<_all_rencai.length;)"工部尚书"==_all_rencai[i].官职&&招揽民夫拉动条(_all_rencai[i]),i++}function 招揽民夫拉动条(i){id("数值拉动面板").style.display="block",id("zhixingren").innerText="执行人："+i.名字,id("zxrbg").onclick=function(){id("数值拉动面板").style.display="none",人才列表显示(22)},执行数值拉动(1,void 0,i)}function 解雇民夫面板(){if(1==主角.解雇民夫)小提示("本季已进行过了");else for(i=0;i<_all_rencai.length;)"工部尚书"==_all_rencai[i].官职&&解雇民夫拉动条(_all_rencai[i]),i++}function 解雇民夫拉动条(i){id("数值拉动面板").style.display="block",id("zhixingren").innerText="执行人："+i.名字,id("zxrbg").onclick=function(){id("数值拉动面板").style.display="none",人才列表显示(23)},执行数值拉动(4,void 0,i)}function 执行数值拉动(i,n,d){if(id("range").value=0,1==i){for(var e=0,l=0;l<_all_city.length;)8==_all_city[l].归属&&(e+=Math.round(_all_city[l].人口/10*d.魅力/100),0),l+=1;var a=Math.floor(.2*e);4*a>国家.金钱&&(a=Math.round(国家.金钱/4)),id("range").max=a,change(),id("rangeText").innerText="回禀皇上：\n当前国家共有民夫："+国家.民夫+"名。\n当前可以征召民夫："+id("range").max+"名。\n执行大臣魅力决定招募数量，清廉决定是否贪污。",id("range").max<8e3&&(id("rangeText").innerText+="\n各州府壮丁数量很少，恐怕很难招募。"),id("rangeText").innerText+="\n\n从各地的壮丁中征召民夫。",id("rqueding").onclick=function(){var i,n,e;0==id("range").value?小提示("请拉动红条操作"):0<id("range").value&&(n="朝廷招揽全国有意从事建设工作的民夫"+(i=Number(id("range").value))+"名，报到者每人赏二两奖金，劳作期每月薪俸二两。",国家减少壮丁(i),e=Math.round(-2*i*(2-d.清廉/100)),国库钱数变动的程序(e),国家.民夫+=i,主角.招募民夫=1,d.任务中=1,d.功勋+=10,出圣旨(n),大殿体力扣除程序(10),id("数值拉动面板").style.display="none",更新资料(属性栏))}}else if(2==i){for(l=e=0;l<_all_city.length;)8==_all_city[l].归属&&(e+=Math.round(_all_city[l].人口/10*d.魅力/100),0),l+=1;4*(a=Math.floor(.5*e))>国家.金钱&&(a=Math.round(国家.金钱/4)),id("range").max=a,change(),id("rangeText").innerText="回禀皇上：\n当前国家共有未编士兵："+国家.士兵+"名。\n当前可以征召新兵："+id("range").max+"名。\n执行大臣魅力决定招募数量，清廉决定是否贪污。",id("range").max<8e3&&(id("rangeText").innerText+="\n各州府壮丁数量很少，恐怕很难招募。"),id("rangeText").innerText+="\n\n从各地的壮丁中征召士兵。",id("rqueding").onclick=function(){var i,n,e;0==id("range").value?小提示("请拉动红条操作"):0<id("range").value&&(n="中央招募全国有意从军效国之士兵"+(i=Number(id("range").value))+"名，新兵奖励每人三两，薪俸十两，精兵月俸十五两。",国家减少壮丁(i),e=Math.round(-3*i*(2-d.清廉/100)),国库钱数变动的程序(e),国家.士兵+=i,主角.招募士兵=1,d.任务中=1,d.功勋+=10,出圣旨(n),大殿体力扣除程序(10),id("数值拉动面板").style.display="none",更新资料(属性栏))}}else 3==i?(id("range").max=Math.floor(国家.士兵/2),change(),id("rangeText").innerText="回禀皇上：\n当前国家共有士兵："+国家.士兵+"名。\n当前可以进行卸甲归田的士兵："+id("range").max+"名。\n应维持适量的士兵，以保卫国家。\n执行大臣清廉决定是否贪污。",id("range").max<8e3&&(id("rangeText").innerText+="\n国家不可无兵，请皇上慎重。"),id("rangeText").innerText+="\n\n将士兵送回各地归农。",id("rqueding").onclick=function(){if(0==id("range").value)小提示("请拉动红条操作");else if(0<id("range").value){var i=Number(id("range").value),n="令兵部尚书解雇士兵"+i+"名，每人给三两银子，还乡归民。",e=Math.round(-3*i*(2-d.清廉/100));国库钱数变动的程序(e),国家.士兵-=i,主角.卸甲归田=1,d.任务中=1,d.功勋+=10;for(var l,a=0,t=0;t<_all_city.length;)8==_all_city[t].归属&&(a+=1),t+=1;for(l=Math.round(i/a),t=0;t<_all_city.length;)8==_all_city[t].归属&&(_all_city[t].人口+=l),t+=1;出圣旨(n),大殿体力扣除程序(10),id("数值拉动面板").style.display="none",更新资料(属性栏)}}):4==i?(id("range").max=Math.floor(国家.可用民夫/2),change(),id("rangeText").innerText="回禀皇上：\n当前国家共有民夫："+国家.民夫+"名。\n当前可以进行解雇的民夫："+id("range").max+"名。\n应维持一定数量的民夫，以保证国家建设。\n执行大臣清廉决定是否贪污。",id("range").max<1e4&&(id("rangeText").innerText+="\n民夫数量已经很少，请皇上慎重。"),id("rangeText").innerText+="\n\n将民夫送回各地归农。",id("rqueding").onclick=function(){if(0==id("range").value)小提示("请拉动红条操作");else if(0<id("range").value){var i=Number(id("range").value),n="令工部尚书解雇民夫"+i+"名，每人给二两银子，还乡归民。",e=Math.round(-2*i*(2-d.清廉/100));国库钱数变动的程序(e),国家.民夫-=i,国家.可用民夫-=i,主角.解雇民夫=1,d.任务中=1,d.功勋+=10;for(var l,a=0,t=0;t<_all_city.length;)8==_all_city[t].归属&&(a+=1),t+=1;for(l=Math.round(i/a),t=0;t<_all_city.length;)8==_all_city[t].归属&&(_all_city[t].人口+=l),t+=1;出圣旨(n),大殿体力扣除程序(10),id("数值拉动面板").style.display="none",更新资料(属性栏)}}):5==i&&(5e5<国家.金钱?id("range").max=5e5:id("range").max=Math.floor(国家.金钱/10),change(),id("rangeText").innerText="回禀皇上：\n当前投入的调查经费"+国家.调查经费+"两。\n拨的银子，将持续有效。",id("rangeText").innerText+="\n\n官员的数量决定每月需要的调查费用。",id("rqueding").onclick=function(){var i,n;0==id("range").value?小提示("请拉动红条操作"):0<id("range").value&&(n="国库拨银"+(i=Number(id("range").value))+"两至刑部，对各地大臣进行检查。",国家.调查经费+=i,国库钱数变动的程序(-1*i),出圣旨(n),大殿体力扣除程序(20),id("数值拉动面板").style.display="none",更新资料(属性栏))})}function 国家减少壮丁(i){for(var n=[],e=0;e<_all_city.length;)8==_all_city[e].归属&&n.push(_all_city[e]),e+=1;for(var l=Math.round(i/n.length),e=0;e<n.length;)n[e].人口>l&&(n[e].人口-=l),e+=1}function 在这里建设行宫(i,n){var e=Math.round(3e6*(2-n.清廉/100)),l=Math.round(8e4*(2-n.政治/100));id("hukoupucha").style.display="block",id("huhouTitle").innerText="建设行宫",id("huhouText").innerText="建设行宫后可以去该地出游。要在"+i.名称+"建设行宫吗？\n执行人："+n.名字+"\n（需要银两"+e+"，需要民夫"+l+"）。",id("hkan1").onclick=function(){id("hukoupucha").style.display="none"},id("hkan0").onclick=function(){国家.金钱<e?小提示("国库银两不足"):国家.可用民夫<l?小提示("民夫数量不足"):(i.行宫=3,n.任务中=1,n.功勋+=10,国家.可用民夫-=l,国家.金钱-=e,出圣旨("即刻命"+n.名字+"前往"+i.名称+"修建行宫。"),id("hukoupucha").style.display="none",大殿体力扣除程序(10))}}function 缉拿贪官(){id("hukoupucha").style.display="block",id("huhouTitle").innerText="缉拿贪官",id("huhouText").innerText="调查贪污可以将有贪污嫌疑的官员缉拿归案。（目前正在执行任务的官员无法缉拿）\n缉拿大臣后请在处理罪臣选项惩处罪臣。\n确定要缉拿有贪污嫌疑的大臣吗？",id("hkan1").onclick=function(){id("hukoupucha").style.display="none"},id("hkan0").onclick=function(){人才列表显示(21)}}function 缉拿贪污官员(i){i.任务中=4,i.罪名="贪污",出圣旨("即刻将"+i.名字+"以贪污罪缉拿归案。"),大殿体力扣除程序(30),id("hukoupucha").style.display="none"}function 缉拿反贼(){id("hukoupucha").style.display="block",id("huhouTitle").innerText="缉拿反贼",id("huhouText").innerText="调查谋反可以将有谋反嫌疑的官员缉拿归案。（目前正在执行任务的官员无法缉拿）\n缉拿大臣后请在处理罪臣选项惩处罪臣。\n确定要缉拿有谋反嫌疑的大臣吗？",id("hkan1").onclick=function(){id("hukoupucha").style.display="none"},id("hkan0").onclick=function(){人才列表显示(20)}}function 缉拿谋反官员(i){i.任务中=4,i.罪名="谋反",出圣旨("即刻将"+i.名字+"以谋反罪缉拿归案。"),大殿体力扣除程序(30),id("hukoupucha").style.display="none"}function 决定处理结果(i){id("fengjue").style.display="block",id("fjan").innerText="取消",id("fjText").innerText=i.名字+"因"+i.罪名+"嫌疑被缉拿归案。皇上准备如何处置？（处置贪官和反贼可增加其他官员的清廉减少野心，但处置清官和忠臣或姑息贪官和反贼会使官场人心涣散，贪污谋反更甚。）",id("fjan").onclick=function(){id("fengjue").style.display="none"};for(var n=0;n<6;)n<4?(className("fengjue")[n].innerText=治罪[n],className("fengjue")[n].style.display="block"):className("fengjue")[n].style.display="none",n++;className("fengjue")[0].onclick=function(){出圣旨("罪臣"+i.名字+"为官期间犯有"+i.罪名+"罪，证据确凿，罪不可赦，当立刻推出菜市口斩首示众。"),处理结果的影响(1,i),删除指定官员的程序(i),id("fengjue").style.display="none",人才列表显示(36)},className("fengjue")[1].onclick=function(){出圣旨("罪臣"+i.名字+"为官期间犯有"+i.罪名+"罪，证据确凿，罪不可赦，立刻充军发配边疆。"),处理结果的影响(2,i),删除指定官员的程序(i),id("fengjue").style.display="none",人才列表显示(36)},className("fengjue")[2].onclick=function(){出圣旨("罪臣"+i.名字+"为官期间犯有"+i.罪名+"罪，证据确凿，罪不可赦，当立刻革职抄家。"),处理结果的影响(3,i),删除指定官员的程序(i),id("fengjue").style.display="none",人才列表显示(36)},className("fengjue")[3].onclick=function(){出圣旨("大臣"+i.名字+"为官期间曾有"+i.罪名+"嫌疑，但经调查，证据不足，予以无罪释放，官复原职。"),处理结果的影响(4,i),i.任务中=0,id("fengjue").style.display="none",人才列表显示(36)}}function 处理结果的影响(n,e){if(1==n){if("贪污"==e.罪名){if(e.清廉<40){for(i=0;i<_all_rencai.length;)_all_rencai[i].清廉+=10,100<_all_rencai[i].清廉&&(_all_rencai[i].清廉=100),i++;国家.金钱+=1e5}else if(40<=e.清廉&&e.清廉<60){for(i=0;i<_all_rencai.length;)_all_rencai[i].清廉+=5,--_all_rencai[i].忠诚,100<_all_rencai[i].清廉&&(_all_rencai[i].清廉=100),_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++;国家.金钱+=5e4}else if(60<=e.清廉&&e.清廉<80){for(i=0;i<_all_rencai.length;)_all_rencai[i].清廉+=2,_all_rencai[i].忠诚-=5,100<_all_rencai[i].清廉&&(_all_rencai[i].清廉=100),_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++;国家.金钱+=1e4}else if(80<=e.清廉){for(i=0;i<_all_rencai.length;)_all_rencai[i].忠诚-=15,_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++;国家.金钱+=1e3}}else if("谋反"==e.罪名)if(e.野心<40)for(i=0;i<_all_rencai.length;)_all_rencai[i].忠诚-=10,_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++;else if(40<=e.野心&&e.野心<60)for(i=0;i<_all_rencai.length;)_all_rencai[i].野心-=2,--_all_rencai[i].忠诚,_all_rencai[i].野心<0&&(_all_rencai[i].野心=0),_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++;else if(60<=e.野心&&e.野心<80)for(i=0;i<_all_rencai.length;)_all_rencai[i].野心-=5,_all_rencai[i].野心<0&&(_all_rencai[i].野心=0),i++;else if(80<=e.野心)for(i=0;i<_all_rencai.length;)_all_rencai[i].野心-=10,_all_rencai[i].野心<0&&(_all_rencai[i].野心=0),i++}else if(2==n){if("贪污"==e.罪名){if(e.清廉<40){for(i=0;i<_all_rencai.length;)_all_rencai[i].清廉+=5,100<_all_rencai[i].清廉&&(_all_rencai[i].清廉=100),i++;国家.金钱+=1e5}else if(40<=e.清廉&&e.清廉<60){for(i=0;i<_all_rencai.length;)_all_rencai[i].清廉+=5,100<_all_rencai[i].清廉&&(_all_rencai[i].清廉=100),i++;国家.金钱+=5e4}else if(60<=e.清廉&&e.清廉<80){for(i=0;i<_all_rencai.length;)_all_rencai[i].清廉+=2,_all_rencai[i].忠诚-=2,100<_all_rencai[i].清廉&&(_all_rencai[i].清廉=100),_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++;国家.金钱+=1e4}else if(80<=e.清廉){for(i=0;i<_all_rencai.length;)_all_rencai[i].忠诚-=15,_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++;国家.金钱+=1e3}}else if("谋反"==e.罪名)if(e.野心<40)for(i=0;i<_all_rencai.length;)_all_rencai[i].忠诚-=8,_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++;else if(40<=e.野心&&e.野心<60)for(i=0;i<_all_rencai.length;)_all_rencai[i].野心-=2,--_all_rencai[i].忠诚,_all_rencai[i].野心<0&&(_all_rencai[i].野心=0),_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++;else if(60<=e.野心&&e.野心<80)for(i=0;i<_all_rencai.length;)_all_rencai[i].野心-=2,_all_rencai[i].野心<0&&(_all_rencai[i].野心=0),i++;else if(80<=e.野心)for(i=0;i<_all_rencai.length;)_all_rencai[i].野心-=5,_all_rencai[i].野心<0&&(_all_rencai[i].野心=0),i++}else if(3==n){if("贪污"==e.罪名){if(e.清廉<40){for(i=0;i<_all_rencai.length;)_all_rencai[i].清廉+=3,100<_all_rencai[i].清廉&&(_all_rencai[i].清廉=100),i++;国家.金钱+=1e5}else if(40<=e.清廉&&e.清廉<60){for(i=0;i<_all_rencai.length;)_all_rencai[i].清廉+=2,100<_all_rencai[i].清廉&&(_all_rencai[i].清廉=100),i++;国家.金钱+=5e4}else if(60<=e.清廉&&e.清廉<80){for(i=0;i<_all_rencai.length;)_all_rencai[i].清廉+=1,100<_all_rencai[i].清廉&&(_all_rencai[i].清廉=100),_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++;国家.金钱+=1e4}else if(80<=e.清廉){for(i=0;i<_all_rencai.length;)_all_rencai[i].忠诚-=15,_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++;国家.金钱+=1e3}}else if("谋反"==e.罪名)if(e.野心<40)for(i=0;i<_all_rencai.length;)_all_rencai[i].忠诚-=8,_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++;else if(40<=e.野心&&e.野心<60)for(i=0;i<_all_rencai.length;)--_all_rencai[i].野心,--_all_rencai[i].忠诚,_all_rencai[i].野心<0&&(_all_rencai[i].野心=0),_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++;else if(60<=e.野心&&e.野心<80)for(i=0;i<_all_rencai.length;)_all_rencai[i].野心+=1,100<_all_rencai[i].野心&&(_all_rencai[i].野心=100),i++;else if(80<=e.野心)for(i=0;i<_all_rencai.length;)_all_rencai[i].野心+=2,_all_rencai[i].野心<0&&(_all_rencai[i].野心=0),i++}else if(4==n)if("贪污"==e.罪名){if(e.清廉<40)for(i=0;i<_all_rencai.length;)_all_rencai[i].清廉-=3,_all_rencai[i].清廉<1&&(_all_rencai[i].清廉=1),i++;else if(40<=e.清廉&&e.清廉<60)for(i=0;i<_all_rencai.length;)_all_rencai[i].清廉-=2,_all_rencai[i].清廉<1&&(_all_rencai[i].清廉=1),i++;else if(60<=e.清廉&&e.清廉<80)for(i=0;i<_all_rencai.length;)--_all_rencai[i].清廉,_all_rencai[i].清廉<1&&(_all_rencai[i].清廉=1),_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++;else if(80<=e.清廉)for(i=0;i<_all_rencai.length;)_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++}else if("谋反"==e.罪名)if(e.野心<40)for(i=0;i<_all_rencai.length;)_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++;else if(40<=e.野心&&e.野心<60)for(i=0;i<_all_rencai.length;)--_all_rencai[i].忠诚,_all_rencai[i].野心+=1,_all_rencai[i].野心<0&&(_all_rencai[i].野心=0),_all_rencai[i].忠诚<1&&(_all_rencai[i].忠诚=1),i++;else if(60<=e.野心&&e.野心<80)for(i=0;i<_all_rencai.length;)_all_rencai[i].野心+=3,100<_all_rencai[i].野心&&(_all_rencai[i].野心=100),i++;else if(80<=e.野心)for(i=0;i<_all_rencai.length;)_all_rencai[i].野心+=5,100<_all_rencai[i].野心&&(_all_rencai[i].野心=100),i++;更新资料(属性栏)}function 特殊建筑面板(){id("tsjz").style.display="block",序列=0,整理特殊建筑(所有特殊建筑,序列),id("tsjzqian").onclick=function(){1<=序列&&(--序列,整理特殊建筑(所有特殊建筑,序列))},id("tsjzhou").onclick=function(){序列<所有特殊建筑.length/6&&(序列+=1,整理特殊建筑(所有特殊建筑,序列))}}function 整理特殊建筑(i,n){for(var e=0;e<6;){var l=i[6*n+e],a=className("jzdk")[e];null==l?a.style.display="none":(a.style.display="block",a=2*l.id+2174,className("jztu")[e].src="./images/"+a+".png",className("jzmc")[e].innerText=l.名称,className("jzsm")[e].innerText="作用："+l.作用+"\n费用："+l.价格/1e4+"万",2<=l.建筑程度?className("jzan")[e].innerText="完成":0==l.建筑程度?className("jzan")[e].innerText="修建":className("jzan")[e].innerText=l.民夫数量+"民夫",100<(a=Math.floor(l.完成人次/l.需要人次*100))&&(a=100),className("jzshux")[e].innerText=a+"%",className("jztiao2")[e].style.width=a+"%",className("jzan")[e].取=l,className("jzan")[e].onclick=function(){2<=this.取.建筑程度?小提示("该建筑已经完成了"):特殊建筑民夫函数(this.取)}),e+=1}}function 特殊建筑民夫函数(e){id("zhixingren").innerText="",id("zxrbg").onclick=function(){},id("数值拉动面板").style.display="block",id("range").value=0,id("range").max=Math.floor(国家.可用民夫+e.民夫数量),change(),id("rangeText").innerText="回禀皇上：\n当前国家共有可用民夫："+Math.round(国家.可用民夫/1e4)+"万名。\n当前该特殊建筑有："+e.民夫数量+"名。",id("rangeText").innerText+="\n\n需要将多少民夫分配到特殊建筑中",id("rqueding").onclick=function(){var i,n;0==id("range").value?小提示("请拉动红条操作"):0<id("range").value&&(i="调配"+(n=Number(id("range").value))+"名民夫用于特殊建筑。",n=n-e.民夫数量,国家.特殊建筑民夫+=n,国家.可用民夫-=n,e.民夫数量+=n,0==e.建筑程度&&(国家.金钱-=e.价格,e.建筑程度+=1),出圣旨(i),大殿体力扣除程序(10),id("数值拉动面板").style.display="none",id("zxrbg").style.display="block",id("zhixingren").style.display="block",更新资料(),特殊建筑面板())}}武器名称=Array("朴刀","长枪","战马","弓弩"),治罪=Array("斩首示众","充军发配","革职抄家","无罪释放");